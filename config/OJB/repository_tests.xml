<!-- ******************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.Metadata -->
<!-- ******************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.Metadata"
                  table="METADATA">
	<field-descriptor id="1"
		name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
        name="keyExecutionCourse"
        column="KEY_EXECUTION_COURSE"
        jdbc-type="INTEGER"
	/>
    <field-descriptor id="3"
         name="metadataFile"
         column="METADATA_FILE"
    	 jdbc-type="LONGVARCHAR"
    />
    <field-descriptor id="4"
		name="description"
		column="DESCRIPTION"
    	jdbc-type="LONGVARCHAR"
      />
    <field-descriptor id="5"
		name="difficulty"
		column="DIFFICULTY"
		jdbc-type="LONGVARCHAR"
    />
	<field-descriptor id="6"
		name="learningTime"
 		column="LEARNINGTIME"
		jdbc-type="TIME"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Calendar2TimeFieldConversion"
    />
    <field-descriptor id="7"
		name="level"
 		column="LEVEL"
  		jdbc-type="LONGVARCHAR"
    />
    <field-descriptor id="8"
		name="mainSubject"
		column="MAIN_SUBJECT"
		jdbc-type="LONGVARCHAR"
    />
    <field-descriptor id="9"
		name="secondarySubject"
		column="SECONDARY_SUBJECT"
		jdbc-type="LONGVARCHAR"
    />
	<field-descriptor id="10"
		name="author"
		column="AUTHOR"
		jdbc-type="LONGVARCHAR"
	/>
	<field-descriptor id="11"
		name="numberOfMembers"
		column="NUMBER_OF_MEMBERS"
		jdbc-type="INTEGER"
	/>
	<field-descriptor id="12"
		name="visibility"
		column="VISIBILITY"
		jdbc-type="BIT"
	/>
	<field-descriptor
		name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
	/>
    <collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="visibleQuestions"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.Question">
		<inverse-foreignkey field-ref="keyMetadata"/>
		<query-customizer class="net.sourceforge.fenixedu.persistenceTier.customQueries.QuestionFilter">
	    </query-customizer>
	</collection-descriptor>
	<reference-descriptor
         name="executionCourse"
         class-ref="net.sourceforge.fenixedu.domain.ExecutionCourse"
    >
    <foreignkey field-ref="keyExecutionCourse"/>
	</reference-descriptor>
</class-descriptor>

<!-- ******************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.Question -->
<!-- ******************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.Question"
                  table="XML_DOCUMENTS">
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
         name="xmlFile"
         column="XML_FILE"
    	 jdbc-type="LONGVARCHAR"
       />
    <field-descriptor id="3"
        name="xmlFileName"
        column="XML_FILE_NAME"
        jdbc-type="VARCHAR"
    />
    <field-descriptor id="4"
        name="keyMetadata"
        column="KEY_METADATA"
        jdbc-type="INTEGER"
	/>
	<field-descriptor id="5"
        name="visibility"
        column="VISIBILITY"
        jdbc-type="BIT"
	/>
      <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<reference-descriptor
         name="metadata"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.Metadata"> 
	<foreignkey field-ref="keyMetadata"/>
	</reference-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="testQuestions"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.TestQuestion">
		<inverse-foreignkey field-ref="keyQuestion"/>
	</collection-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="studentTestsQuestions"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.StudentTestQuestion">
		<inverse-foreignkey field-ref="keyQuestion"/>
	</collection-descriptor>
</class-descriptor>

<!-- **************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.Test -->
<!-- **************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.Test"
                  table="TESTS">
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
         name="title"
         column="TITLE"
    	 jdbc-type="LONGVARCHAR"
    />
    <field-descriptor id="3"
         name="information"
         column="INFORMATION"
    	 jdbc-type="LONGVARCHAR"
    />
    <field-descriptor id="4"
         name="numberOfQuestions"
         column="NUMBER_OF_QUESTIONS"
    	 jdbc-type="INTEGER"
    />
    <field-descriptor id="5"
        name="creationDate"
        column="CREATION_DATE"
        jdbc-type="TIMESTAMP"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TimeStamp2DateFieldConversion"
	/>
	<field-descriptor id="6"
        name="lastModifiedDate"
        column="LAST_MODIFICATION_DATE"
        jdbc-type="TIMESTAMP"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TimeStamp2DateFieldConversion"
	/>
   <field-descriptor id="7"
        name="keyTestScope"
        column="KEY_TEST_SCOPE"
        jdbc-type="INTEGER"
	/>
      <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<reference-descriptor
         name="testScope"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.TestScope"> 
	<foreignkey field-ref="keyTestScope"/>
	</reference-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="testQuestions"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.TestQuestion"
		>
		<inverse-foreignkey field-ref="keyTest"/>
	</collection-descriptor>
</class-descriptor>

<!-- ************************************ -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.TestQuestion -->
<!-- ************************************ -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.TestQuestion"
                  table="TEST_QUESTION">
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
        name="testQuestionOrder"
        column="TEST_QUESTION_ORDER"
        jdbc-type="INTEGER"
    />
    <field-descriptor id="3"
        name="testQuestionValue"
        column="TEST_QUESTION_VALUE"
        jdbc-type="DOUBLE"
    />
    <field-descriptor id="4"
         name="keyQuestion"
         column="KEY_XML_DOCUMENT"
    	 jdbc-type="INTEGER"
    />
    <field-descriptor id="5"
        name="keyTest"
        column="KEY_TEST"
        jdbc-type="INTEGER"
	/>
	<field-descriptor id="6"
        name="correctionFormula"
        column="CORRECTION_FORMULA"
        jdbc-type="INTEGER"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.CorrectionFormula2EnumCorrectionFormulaFieldConversion"
	/>
      <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<reference-descriptor
         name="question"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.Question">
	<foreignkey field-ref="keyQuestion"/>
	</reference-descriptor>
	<reference-descriptor
         name="test"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.Test"> 
	<foreignkey field-ref="keyTest"/>
	</reference-descriptor>
</class-descriptor>

<!-- *************************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.DistributedTest -->
<!-- *************************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest"
                  table="DISTRIBUTED_TESTS">
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
        name="title"
        column="TITLE"
        jdbc-type="LONGVARCHAR"
	/>
    <field-descriptor id="3"
        name="testInformation"
        column="TEST_INFORMATION"
        jdbc-type="LONGVARCHAR"
	/>
     <field-descriptor id="4"
        name="beginDate"
        column="TEST_BEGIN_DATE"
        jdbc-type="DATE"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Calendar2DateFieldConversion"
	/>
	<field-descriptor id="5"
        name="beginHour"
        column="TEST_BEGIN_HOUR"
        jdbc-type="TIME"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Calendar2TimeFieldConversion"
	/>
   <field-descriptor id="6"
        name="endDate"
        column="TEST_END_DATE"
        jdbc-type="DATE"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Calendar2DateFieldConversion"
	/>
	<field-descriptor id="7"
        name="endHour"
        column="TEST_END_HOUR"
        jdbc-type="TIME"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Calendar2TimeFieldConversion"
	/>
   <field-descriptor id="8"
        name="testType"
        column="TEST_TYPE"
        jdbc-type="INTEGER"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TestType2EnumTestTypeFieldConversion"
	/>
   <field-descriptor id="9"
        name="correctionAvailability"
        column="CORRECTION_AVAILABILITY"
        jdbc-type="INTEGER"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.CorrectionAvailability2EnumCorrectionAvailabilityFieldConversion"
	/>
 	<field-descriptor id="10"
        name="imsFeedback"
        column="IMS_FEEDBACK"
        jdbc-type="INTEGER"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.Int2BooleanFieldConversion"
 	/>
 	<field-descriptor id="11"
         name="numberOfQuestions"
         column="NUMBER_OF_QUESTIONS"
    	 jdbc-type="INTEGER"
    />
	<field-descriptor id="12"
        name="keyTestScope"
        column="KEY_TEST_SCOPE"
        jdbc-type="INTEGER"
	/>
	<field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<reference-descriptor
         name="testScope"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.TestScope"
    > 
	<foreignkey field-ref="keyTestScope"/>
	</reference-descriptor>
	 <collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="studentsLogs"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.StudentTestLog"
		auto-delete="true">
		<inverse-foreignkey field-ref="keyDistributedTest"/>
	</collection-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="distributedTestQuestions"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.StudentTestQuestion"
		auto-delete="true">
		<inverse-foreignkey field-ref="keyDistributedTest"/>
	</collection-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="distributedTestAdvisories"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTestAdvisory"
		auto-delete="true">
		<inverse-foreignkey field-ref="keyDistributedTest"/>
	</collection-descriptor>
	<!-- 
	<reference-descriptor
		name="onlineTest"
		element-ref="net.sourceforge.fenixedu.domain.onlineTests.OnlineTest"
		>
		<inverse-foreignkey field-ref="keyDistributedTest"/>
	</reference-descriptor>
	-->
</class-descriptor>

<!-- ******************************************* -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.StudentTestQuestion -->
<!-- ******************************************* -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.StudentTestQuestion"
                  table="STUDENT_TEST_QUESTION">
    <field-descriptor
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"/>
     <field-descriptor
        name="keyStudent"
        column="KEY_STUDENT"
        jdbc-type="INTEGER"/>
     <field-descriptor
        name="keyDistributedTest"
        column="KEY_DISTRIBUTED_TEST"
        jdbc-type="INTEGER"/>
	<field-descriptor
         name="keyQuestion"
         column="KEY_XML_DOCUMENT"
    	 jdbc-type="INTEGER"/>
    <field-descriptor
        name="testQuestionOrder"
        column="TEST_QUESTION_ORDER"
        jdbc-type="INTEGER"/>
    <field-descriptor
        name="testQuestionValue"
        column="TEST_QUESTION_VALUE"
        jdbc-type="DOUBLE"/>
    <field-descriptor
        name="testQuestionMark"
        column="TEST_QUESTION_MARK"
        jdbc-type="DOUBLE"/>
    <field-descriptor
        name="oldResponse"
        column="OLD_RESPONSE"
        jdbc-type="INTEGER"/>
    <field-descriptor
        name="response"
        column="RESPONSE"
        jdbc-type="LONGVARCHAR"/>   
    <field-descriptor
        name="optionShuffle"
        column="OPTION_SHUFFLE"
        jdbc-type="LONGVARCHAR"/>
    <field-descriptor
        name="correctionFormula"
        column="CORRECTION_FORMULA"
        jdbc-type="INTEGER"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.CorrectionFormula2EnumCorrectionFormulaFieldConversion"
	/>
      <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
     <reference-descriptor
        name="student"
        class-ref="net.sourceforge.fenixedu.domain.Student">
	     <foreignkey field-ref="keyStudent"/>
     </reference-descriptor>
     <reference-descriptor
        name="distributedTest"
        class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest">
     	<foreignkey field-ref="keyDistributedTest"/>
     </reference-descriptor>
     <reference-descriptor
        name="question"
        class-ref="net.sourceforge.fenixedu.domain.onlineTests.Question">
     	<foreignkey field-ref="keyQuestion"/>
     </reference-descriptor>
</class-descriptor>

<!-- ************************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.StudentTestLog -->
<!-- ************************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.StudentTestLog"
                  table="STUDENT_TEST_LOG">
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
    <field-descriptor id="2"
        name="keyStudent"
        column="KEY_STUDENT"
        jdbc-type="INTEGER"
	/>
    <field-descriptor id="3"
         name="keyDistributedTest"
         column="KEY_DISTRIBUTED_TEST"
    	 jdbc-type="INTEGER"
   	/>
   	<field-descriptor id="4"
        name="date"
        column="DATE"
        jdbc-type="TIMESTAMP"
        conversion="net.sourceforge.fenixedu.persistenceTier.Conversores.TimeStamp2DateFieldConversion"
	/>
	<field-descriptor id="5"
         name="event"
         column="EVENT"
    	 jdbc-type="LONGVARCHAR"
    />
      <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
    <reference-descriptor
         name="student"
         class-ref="net.sourceforge.fenixedu.domain.Student"
    >
	<foreignkey field-ref="keyStudent"/>
	</reference-descriptor>
	<reference-descriptor
         name="distributedTest"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest"
    >
	<foreignkey field-ref="keyDistributedTest"/>
	</reference-descriptor>
</class-descriptor>

<!-- ********************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.OnLineTest -->
<!-- ********************************** -->
   <class-descriptor proxy="dynamic"
   	  class="net.sourceforge.fenixedu.domain.onlineTests.OnlineTest"
   	  table="EVALUATION"
   >
      <field-descriptor
         name="idInternal"
         column="ID_INTERNAL"
         jdbc-type="INTEGER"
         primarykey="true"
         autoincrement="true"
      />
      <field-descriptor
         name="ojbConcreteClass"
         column="CLASS_NAME"
         jdbc-type="VARCHAR"
      />
      <field-descriptor
         name="publishmentMessage"
         column="PUBLISHMENT_MESSAGE"
        jdbc-type="VARCHAR"
      />
      <field-descriptor
         name="keyDistributedTest"
         column="KEY_DISTRIBUTED_TEST"
        jdbc-type="INTEGER"
      />
       <field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
			name="associatedExecutionCoursesForOnlineTest"
			element-class-ref="net.sourceforge.fenixedu.domain.ExecutionCourse"
			indirection-table="EXAM_EXECUTION_COURSE">
		<fk-pointing-to-this-class column="KEY_EVALUATION"/>
		<fk-pointing-to-element-class column="KEY_EXECUTION_COURSE"/>
	</collection-descriptor>
	<reference-descriptor
         name="distributedTest"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest">
		<foreignkey field-ref="keyDistributedTest"/>
	</reference-descriptor>
</class-descriptor>

<!-- ********************************* -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.TestScope -->
<!-- ********************************* -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.TestScope"
                  table="TEST_SCOPE"
                  row-reader="net.sourceforge.fenixedu.persistenceTier.rowReaders.TestScopeRowReader" 
                  >
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
 	<field-descriptor id="2"
         name="className"
         column="CLASS_NAME"
    	 jdbc-type="VARCHAR"
    />
    <field-descriptor id="3"
         name="keyClass"
         column="KEY_CLASS"
    	 jdbc-type="INTEGER"
    />
	<field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
    <collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="tests"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.Test">
		<inverse-foreignkey field-ref="keyTestScope"/>
	</collection-descriptor>
	<collection-descriptor proxy="true" collection-class="org.apache.ojb.broker.util.collections.ManageableVector"
		name="distributedTests"
		element-class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest">
		<inverse-foreignkey field-ref="keyTestScope"/>
	</collection-descriptor>
</class-descriptor>


<!-- *********************************************** -->
<!-- Definitions for net.sourceforge.fenixedu.domain.onlineTests.DistributedTestAdvisory -->
<!-- *********************************************** -->
<class-descriptor proxy="dynamic" class="net.sourceforge.fenixedu.domain.onlineTests.DistributedTestAdvisory"
                  table="DISTRIBUTED_TEST_ADVISORY"
                  >
    <field-descriptor id="1"
        name="idInternal"
        column="ID_INTERNAL"
        jdbc-type="INTEGER"
        primarykey="true"
        autoincrement="true"
    />
 	<field-descriptor id="2"
         name="keyDistributedTest"
         column="KEY_DISTRIBUTED_TEST"
    	 jdbc-type="INTEGER"
    />
    <field-descriptor id="3"
         name="keyAdvisory"
         column="KEY_ADVISORY"
    	 jdbc-type="INTEGER"
    />
	<field-descriptor
      	name="ackOptLock"
      	column="ACK_OPT_LOCK"
      	jdbc-type="INTEGER"
      	locking="true"
      />
	<reference-descriptor
         name="distributedTest"
         class-ref="net.sourceforge.fenixedu.domain.onlineTests.DistributedTest"
    >
    <foreignkey field-ref="keyDistributedTest"/>
    </reference-descriptor>
    <reference-descriptor
         name="advisory"
         class-ref="net.sourceforge.fenixedu.domain.Advisory">
    <foreignkey field-ref="keyAdvisory"/>
    </reference-descriptor>
</class-descriptor>