<%@ page language="java" %><%@ page import="net.sourceforge.fenixedu.presentationTier.Action.resourceAllocationManager.utils.PresentationConstants" %><%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %><html:xhtml/><%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %><%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %><logic:notPresent name="<%= PresentationConstants.DATE %>">	<table width="98%" border="0" cellpadding="0" cellspacing="0">		<tr>	    	<td class="infoselected">	    		<p>O curso seleccionado &eacute;:</p>	    		<strong><jsp:include page="context.jsp"/></strong>			</td>		</tr> 	</table></logic:notPresent><br/><h2>  <logic:notPresent name="<%= PresentationConstants.EXAM_OID %>">    <bean:message key="title.exam.create"/>  </logic:notPresent>  <logic:present name="<%= PresentationConstants.EXAM_OID %>">    <bean:message key="title.exam.edit"/>  </logic:present></h2> <html:form action="/createExamNew" focus="day">	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.page" property="page" value="1"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.method" property="method" value="prepare"/> 	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.executionCourseToDissociateID" property="executionCourseToDissociateID"/>			<html:hidden alt="<%= PresentationConstants.EXECUTION_PERIOD_OID %>" property="<%= PresentationConstants.EXECUTION_PERIOD_OID %>"					 value="<%= pageContext.findAttribute("executionPeriodOID").toString() %>"/>				<logic:present name="<%= PresentationConstants.EXECUTION_DEGREE_OID %>">			<html:hidden alt="<%= PresentationConstants.EXECUTION_DEGREE_OID %>" property="<%= PresentationConstants.EXECUTION_DEGREE_OID %>"						 value="<%= pageContext.findAttribute("executionDegreeOID").toString() %>"/>			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEAR_OID %>" property="<%= PresentationConstants.CURRICULAR_YEAR_OID %>"						 value="<%= pageContext.findAttribute("curricularYearOID").toString() %>"/>		</logic:present>				 		<html:hidden alt="<%= PresentationConstants.EXECUTION_COURSE_OID %>" property="<%= PresentationConstants.EXECUTION_COURSE_OID %>"					 value="<%= pageContext.findAttribute("executionCourseOID").toString() %>"/>						<logic:present name="<%= PresentationConstants.DATE %>">			<html:hidden alt="<%= PresentationConstants.DATE %>" property="<%= PresentationConstants.DATE %>"						 value="<%= pageContext.findAttribute("date").toString() %>"/>			<html:hidden alt="<%= PresentationConstants.START_TIME %>" property="<%= PresentationConstants.START_TIME %>"						 value="<%= pageContext.findAttribute("start_time").toString() %>"/>			<html:hidden alt="<%= PresentationConstants.END_TIME %>" property="<%= PresentationConstants.END_TIME %>"						 value="<%= pageContext.findAttribute("end_time").toString() %>"/>		</logic:present>				<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.sortBy" property="sortBy" value="capacity"/>						 		<logic:present name="nextPage">			<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.nextPage" property="nextPage"						 value="<%= pageContext.findAttribute(PresentationConstants.NEXT_PAGE).toString() %>"/>		</logic:present>	<logic:iterate id="year" name="<%= PresentationConstants.CURRICULAR_YEARS_LIST %>" scope="request">		<logic:equal name="year" value="1">			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEARS_1 %>" property="<%= PresentationConstants.CURRICULAR_YEARS_1 %>"						 value="1"/>		</logic:equal>		<logic:equal name="year" value="2">			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEARS_2 %>" property="<%= PresentationConstants.CURRICULAR_YEARS_2 %>"						 value="2"/>		</logic:equal>		<logic:equal name="year" value="3">			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEARS_3 %>" property="<%= PresentationConstants.CURRICULAR_YEARS_3 %>"						 value="3"/>		</logic:equal>		<logic:equal name="year" value="4">			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEARS_4 %>" property="<%= PresentationConstants.CURRICULAR_YEARS_4 %>"						 value="4"/>		</logic:equal>		<logic:equal name="year" value="5">			<html:hidden alt="<%= PresentationConstants.CURRICULAR_YEARS_5 %>" property="<%= PresentationConstants.CURRICULAR_YEARS_5 %>"						 value="5"/>		</logic:equal>	</logic:iterate><span class="error"><!-- Error messages go here --><html:errors /></span>	<table>		<tr>			<td>			   	<bean:message key="property.exam.date"/>:			</td>			<td>   				<html:text bundle="HTMLALT_RESOURCES" altKey="text.day" maxlength="2" size="2" property="day"/>			   	/		  		<html:text bundle="HTMLALT_RESOURCES" altKey="text.month" maxlength="2" size="2" property="month"/>			   	/		  		<html:text bundle="HTMLALT_RESOURCES" altKey="text.year" maxlength="4" size="4" property="year"/>			   	(ex: 24/12/2004)			</td>		</tr>		<tr>			<td>			    <bean:message key="property.exam.beginning"/>:			</td>			<td>		  		<html:text bundle="HTMLALT_RESOURCES" altKey="text.beginningHour" maxlength="2" size="2" property="beginningHour"/>   				:		  		<html:text bundle="HTMLALT_RESOURCES" altKey="text.beginningMinute" maxlength="2" size="2" property="beginningMinute"/>			</td>		</tr>		<tr>			<td>    			<bean:message key="property.exam.end"/>:			</td>			<td>			   	<html:text bundle="HTMLALT_RESOURCES" altKey="text.endHour" maxlength="2" size="2" property="endHour"/>			   	:			   	<html:text bundle="HTMLALT_RESOURCES" altKey="text.endMinute" maxlength="2" size="2" property="endMinute"/>			</td>		</tr>		<tr>			<td>			    <bean:message key="property.exam.season"/>:			</td>			<td>			   	<html:select bundle="HTMLALT_RESOURCES" altKey="select.season" property="season">			       	<option value="" selected="selected"></option>           				    <html:options collection="<%= PresentationConstants.LABLELIST_SEASONS %>" property="value" labelProperty="label"/>                  	             			    </html:select>			</td>		</tr>	</table><br/>										 <logic:notEmpty name="rooms"> Salas: 							<logic:iterate indexId="index" id="room" name="rooms" type="net.sourceforge.fenixedu.dataTransferObject.InfoRoom">					<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.rooms" property="rooms" value="<%= room.getExternalId().toString() %>"/>					<bean:write name="room" property="nome"/>	</logic:iterate></logic:notEmpty><html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" styleClass="inputbutton" onclick="this.form.method.value='associateRoom';this.form.page.value=4;">	<bean:message key="property.exam.associateRooms"/></html:submit><br/><h3>	<table width="98%" border="0" cellpadding="0" cellspacing="0">		<tr>			<td bgcolor="#FFFFFF" class="infoop">				<bean:message key="property.exam.subtitle"/> 				<html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" onclick="this.form.method.value='associateExecutionCourse';this.form.page.value=2;">								<bean:message key="property.exam.associate"/>					</html:submit>			</td>		</tr>	</table></h3> <logic:present name="<%= PresentationConstants.EXECUTION_COURSES_LIST %>"><bean:size name="<%= PresentationConstants.EXECUTION_COURSES_LIST %>" id="compr"/>	<logic:iterate indexId="i" id="executionCourse" name="<%= PresentationConstants.EXECUTION_COURSES_LIST %>">			<bean:define id="executionCourseOID" name="executionCourse" property="externalId"/>			<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.executionCourses" property="executionCourses" value="<%= pageContext.findAttribute("executionCourseOID").toString() %>"/>			<b>			<bean:write name="executionCourse" property="nome"/>			<logic:greaterThan name="compr" value="1">			<html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" styleClass="inputbutton" onclick='<%= "this.form.method.value='dissociateExecutionCourse';this.form.page.value=2;this.form.executionCourseToDissociateID.value='" + executionCourseOID.toString() + "';" %>'>				<bean:message key="property.exam.dissociate"/>			</html:submit>			</logic:greaterThan>			</b>			<br/>			<logic:iterate id="curricularCourse" name="executionCourse" property="associatedInfoCurricularCourses">				<logic:iterate id="scope" name="curricularCourse" property="infoScopes">					<html:multibox bundle="HTMLALT_RESOURCES" altKey="multibox.scopes" property="scopes">						<bean:write name="scope" property="externalId"/>					</html:multibox>					<bean:write name="curricularCourse" property="infoDegreeCurricularPlan.name"/>					<bean:write name="scope" property="infoCurricularSemester.infoCurricularYear.year"/>ï¿½ Ano<logic:notEmpty name="scope" property="infoBranch.name">, <bean:write name="scope" property="infoBranch.name"/>					</logic:notEmpty>					<br/>				</logic:iterate>			</logic:iterate>				<br/>	</logic:iterate></logic:present><br/><br/><logic:notPresent name="<%= PresentationConstants.EXAM_OID %>">	<html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" styleClass="inputbutton"  onclick="this.form.method.value='create';this.form.page.value=6;">		<bean:message key="label.create"/>	</html:submit></logic:notPresent><logic:present name="<%= PresentationConstants.EXAM_OID %>"><%--	<html:hidden alt="<%= PresentationConstants.EXAM %>" property="<%= PresentationConstants.EXAM %>"/> --%>	<html:hidden alt="<%= PresentationConstants.EXAM_OID %>" property="<%= PresentationConstants.EXAM_OID %>"		value="<%= pageContext.findAttribute(PresentationConstants.EXAM_OID).toString() %>"/>	<html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" styleClass="inputbutton"  onclick="this.form.method.value='edit';this.form.page.value=6;">		<bean:message key="label.edit"/>	</html:submit></logic:present><logic:notPresent name="<%= PresentationConstants.EXAM_OID %>">	<html:reset bundle="HTMLALT_RESOURCES" altKey="reset.reset" value="Limpar" styleClass="inputbutton">		<bean:message key="label.clear"/>	</html:reset></logic:notPresent><logic:present name="<%= PresentationConstants.EXAM_OID %>">	<html:reset bundle="HTMLALT_RESOURCES" altKey="reset.reset" value="Repor" styleClass="inputbutton">		<bean:message key="label.repor"/>	</html:reset></logic:present><%--	<html:cancel bundle="HTMLALT_RESOURCES" altKey="cancel.cancel" value="Cancelar" styleClass="inputbutton">		<bean:message key="label.cancel"/>	</html:cancel>--%></html:form>