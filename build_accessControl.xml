<?xml version="1.0" encoding="ISO-8859-1"?>
<project basedir="." default="inject" name="Fenix Build File">
  <property environment="env"/>
  <property name="encoding" value="ISO-8859-1"/>	

	<property file="build.properties"/>

	<!-- Directories for compiled code -->
	<property name="build.home" location="build"/>
	<property name="build.home.webinf" value="${build.home}/WEB-INF"/>
	<property name="build.home.webinf.classes" value="${build.home.webinf}/classes"/>

	<taskdef name="injectAccessControl" classname="net.sourceforge.fenixedu.accessControl.injector.antTask.InjectAccessControl">
		<classpath>
      <pathelement path="${build.home.webinf.classes}"/>
      <fileset dir="lib">
        <include name="**/*.jar"/>
	    </fileset>
		</classpath>
	</taskdef>
		
	<target name="inject">
		<injectAccessControl verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.accessControl.FenixAccessControlCallsGenerator"
				accessControlAnnotation="net.sourceforge.fenixedu.accessControl.Checked">
			<classpath>
				<pathelement path="${build.home.webinf.classes}"/>
				<fileset dir="lib">
					<include name="**/*.jar"/>
				</fileset>
			</classpath>
			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/**/*.*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectAccessControl>
	</target>

	<target name="void-inject">
		<injectAccessControl verbose="false" 
				targetClassesDir="${build.home.webinf.classes}" 
				codeProducerClassName="net.sourceforge.fenixedu.accessControl.FenixVoidAccessControlCallsGenerator"
				accessControlAnnotation="net.sourceforge.fenixedu.accessControl.Checked">
			<classpath>
	      <pathelement path="${build.home.webinf.classes}"/>
		      <fileset dir="lib">
						<include name="**/*.jar"/>
          </fileset>
      </classpath>
			
			<fileset dir="${build.home.webinf.classes}">
				<include name="**/domain/*.*"/>
				<exclude name="**/domain/RootDomainObject*"/>
			</fileset>
		</injectAccessControl>
	</target>

</project>
