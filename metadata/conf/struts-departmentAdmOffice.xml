<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
 
	<!-- ========== Data Source Configuration =============================== -->
	
	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">  
		<form-bean name="objectOIDForm" 
			type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="idInternal" type="java.lang.Integer"/>
		</form-bean>

		<form-bean name="teacherSearchForm" 
			type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="teacherNumber" type="java.lang.String"/>
			<form-property name="page" type="java.lang.Integer" initial="0"/>
		</form-bean>

		<form-bean name="professorshipForm" 
							type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="teacherId" type="java.lang.Integer"/>
			<form-property name="executionCourseId" type="java.lang.Integer"/>
		</form-bean>

		<form-bean name="teacherExecutionCourseShiftProfessorshipForm" 
							type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="teacherId" type="java.lang.Integer"/>
			<form-property name="executionCourseId" type="java.lang.Integer"/>
			<form-property name="teacherPercentageMap" type="java.util.HashMap"/>
			<form-property name="page" type="java.lang.Integer" initial="0"/>
		</form-bean>

		<form-bean name="supportLessonForm" 
							type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="page" type="java.lang.Integer" initial="0"/>
			<form-property name="teacherId" type="java.lang.Integer"/>
			<form-property name="executionCourseId" type="java.lang.Integer"/>
			
			<form-property name="idInternal" type="java.lang.Integer"/>
			<form-property name="infoProfessorshipId" type="java.lang.Integer"/>
			<form-property name="weekDay" type="java.lang.String"/>

			<form-property name="startTimeHour" type="java.lang.String"/>			
			<form-property name="startTimeMinutes" type="java.lang.String"/>			

			<form-property name="endTimeHour" type="java.lang.String"/>
			<form-property name="endTimeMinutes" type="java.lang.String"/>

			<form-property name="place" type="java.lang.String"/>
		</form-bean>

		<form-bean name="teacherDegreeFinalProjectStudentForm" 
							type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
			<form-property name="page" type="java.lang.Integer" initial="0"/>

			<form-property name="idInternal" type="java.lang.Integer"/>
			
			<form-property name="teacherId" type="java.lang.Integer"/>
			<form-property name="studentId" type="java.lang.Integer"/>
			<form-property name="executionYearId" type="java.lang.Integer"/>

			<form-property name="studentNumber" type="java.lang.String"/>
		</form-bean>

		<form-bean name="teacherInstitutionWorkingTimeForm" 
							type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">

			<form-property name="page" type="java.lang.Integer" initial="0"/>

			<form-property name="idInternal" type="java.lang.Integer"/>
			<form-property name="teacherId" type="java.lang.String"/>
			<form-property name="executionPeriodId" type="java.lang.String"/>			

			<form-property name="weekDay" type="java.lang.String"/>
			<form-property name="startTimeHour" type="java.lang.String"/>			
			<form-property name="startTimeMinutes" type="java.lang.String"/>			

			<form-property name="endTimeHour" type="java.lang.String"/>
			<form-property name="endTimeMinutes" type="java.lang.String"/>
		
		</form-bean>

    </form-beans>

	 <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
<!--		<exception type="java.lang.Exception"
		  	       key="message.unknown-error"
		  	       path="/index.do" /> -->
		<exception type="ServidorAplicacao.Servico.exceptions.NotAuthorizedException"
		  	       key="message.not-authorized"
		  	       path="/index.do"/>
		  	       
	</global-exceptions>

	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
    </global-forwards>

	<!-- ========== Action Mapping Definitions =============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
    	<action path="/index" type="ServidorApresentacao.Action.commons.VoidAction">
    		<forward name="Success" path="index"/>
    	</action>
	   	
		<!-- =======  USE CASE : Edit Teacher execution course professor ship =========== -->
	   	<action path="/teacherSearchForShiftManagement" input="search-for-shift-management" name="teacherSearchForm" 
	   			scope="request"
	   			parameter="method"
	   			type="ServidorApresentacao.Action.framework.SearchAction"
	   			className="ServidorApresentacao.mapping.framework.SearchActionMapping">

			<set-property property="serviceName" value="FindTeachersService"/>
  			<set-property property="objectAttribute" value="infoTeacher"/>
  			<set-property property="listAttribute" value="infoTeacherList"/>
   			<set-property property="notFoundMessageKey" value="errors.teacher.not.found"/>

   			<forward name="search-form" path="search-for-shift-management"/>
  			<forward name="list-one" path="/showTeacherProfessorships.do"/> 
    		<forward name="list-many" path="view-teachers-for-lessons-management"/>
	   	</action>

	   	<action path="/showTeacherProfessorships" input="show-teacher-professorships"
	   			name="objectOIDForm" scope="request"
	   			type="ServidorApresentacao.Action.department.ReadTeacherProfessorshipsAction">
			<exception type="ServidorAplicacao.Servico.exceptions.NotAuthorizedException"
								key="message.teacher-not-belong-to-department"
								path="/teacherSearchForShiftManagement.do?method=searchForm&amp;page=0"/>	   			
   			<forward name="list-professorships" path="show-teacher-professorships"/>
	   	</action>

	   	<action path="/manageTeacherShiftProfessorships" input="show-teacher-shift-professorships"
	   			name="teacherExecutionCourseShiftProfessorshipForm" scope="request"
	   			parameter="method"
	   			type="ServidorApresentacao.Action.department.ManageShiftProfessorships">
   			<forward name="show-form" path="show-shift-professorships-percentages"/>
			<forward name="successfull-edit" path="/teacherSearchForShiftManagement.do?page=0&amp;method=doSearch"/>
	   	</action>
		<!-- ============================================================ -->	   	
		
		<!-- =======  USE CASE : Edit Teacher SUPPORT LESSONS =========== -->
	   	<action path="/teacherSearchForSupportLessonsManagement"
	   			 input="search-for-support-lessons-management" name="teacherSearchForm" 
	   			scope="request"
	   			parameter="method"
	   			type="ServidorApresentacao.Action.framework.SearchAction"
	   			className="ServidorApresentacao.mapping.framework.SearchActionMapping">

			<set-property property="serviceName" value="FindTeachersService"/>
  			<set-property property="objectAttribute" value="infoTeacher"/>
  			<set-property property="listAttribute" value="infoTeacherList"/>
   			<set-property property="notFoundMessageKey" value="errors.teacher.not.found"/>

   			<forward name="search-form" path="search-for-support-lessons-management"/>
  			<forward name="list-one" path="/showTeacherProfessorshipsForSupportLessonsManagement.do"/> 
    		<forward name="list-many" path="view-teachers-for-lessons-management"/>
	   	</action>

	   	<action path="/showTeacherProfessorshipsForSupportLessonsManagement" input="show-teacher-professorships"
	   			name="professorshipForm" scope="request"
	   			type="ServidorApresentacao.Action.department.ReadTeacherProfessorshipsAction">
			<exception type="ServidorAplicacao.Servico.exceptions.NotAuthorizedException"
								key="message.teacher-not-belong-to-department"
								path="/teacherSearchForSupportLessonsManagement.do?method=searchForm&amp;page=0"/>	   			
	   			
   			<forward name="list-professorships" path="show-teacher-professorships-for-support-lessons-management"/>
	   	</action>

	   	<action path="/manageTeacherExecutionCourseSupportLessons"
	   			name="professorshipForm" scope="request"
	   			type="ServidorApresentacao.Action.department.supportLessons.ReadTeacherSupportLessonsAction">
   			<forward name="list-support-lessons" path="show-teacher-execution-course-support-lessons"/>
	   	</action>

   	  <action path="/manageSupportLesson"
		   	  name="supportLessonForm"
		   	  input="/manageSupportLesson.do?method=prepareEdit&amp;page=0"
   	          type="ServidorApresentacao.Action.teacher.professorship.CRUDSupportLessonAction"
   	          parameter="method"
   	          scope="request"
   	          className="ServidorApresentacao.mapping.framework.CRUDMapping"
   	          validate="true"> 
		<set-property property="editService" value="EditSupportLessonByOID"/>
 		<set-property property="deleteService" value="DeleteSupportLessonByOID"/>
 		<set-property property="readService" value="ReadSupportLessonByOID"/>
  		<set-property property="oidProperty" value="idInternal"/>
    	<set-property property="requestAttribute" value="infoSupportLesson" />
    	<set-property property="infoObjectClassName" value="DataBeans.teacher.professorship.InfoSupportLesson" />
 		<forward name="show-form" path="edit-support-lesson"/> 
 		<forward name="successfull-edit" path="/manageTeacherExecutionCourseSupportLessons.do?page=0"/> 
   		<forward name="successfull-read" path="/manageTeacherExecutionCourseSupportLessons.do?page=0"/>
   		<forward name="successfull-delete" path="/manageTeacherExecutionCourseSupportLessons.do?page=0"/>
 	   </action>
		<!-- =======================================================================  -->		

		<!-- =======  USE CASE : Edit Teacher DEGREE FINAL PROJECT STUDENT =========== -->
	   	<action path="/teacherSearchForDFPStudentManagement" input="search-for-dfp-student-management" name="teacherSearchForm" 
	   			scope="request"
	   			parameter="method"
	   			type="ServidorApresentacao.Action.framework.SearchAction"
	   			className="ServidorApresentacao.mapping.framework.SearchActionMapping">

			<set-property property="serviceName" value="FindTeachersService"/>
  			<set-property property="objectAttribute" value="infoTeacher"/>
  			<set-property property="listAttribute" value="infoTeacherList"/>
   			<set-property property="notFoundMessageKey" value="errors.teacher.not.found"/>

   			<forward name="search-form" path="search-for-dfp-student-management"/>
  			<forward name="list-one" path="/manageTeacherDFPStudent.do?method=list&amp;page=0"/> 
    		<forward name="list-many" path="view-teachers-for-lessons-management"/>
	   	</action>

		<action path="/manageTeacherDFPStudent"
					name="teacherDegreeFinalProjectStudentForm"
		   	  		input="/manageTeacherDFPStudent.do?method=list&amp;page=0"
					type="ServidorApresentacao.Action.degree.finalProject.CRUDTeacherDegreeFinalProjectStudent"
					parameter="method"
					scope="request"
					className="ServidorApresentacao.mapping.framework.CRUDMapping"
					validate="true"> 
			<set-property property="editService" value="EditTeacherDegreeFinalProjectStudentByOID"/>
			<set-property property="deleteService" value="DeleteTeacherDegreeFinalProjectStudentByOID"/>
			<set-property property="readService" value="ReadTeacherDegreeFinalProjectStudentByOID"/>
			<set-property property="oidProperty" value="idInternal"/>
			<set-property property="requestAttribute" value="infoTeacherDegreeFinalProjectStudent" />
			<set-property property="infoObjectClassName" value="DataBeans.degree.finalProject.InfoTeacherDegreeFinalProjectStudent" />

			<exception type="ServidorAplicacao.Servico.degree.finalProject.EditTeacherDegreeFinalProjectStudentByOID$StudentNotFoundServiceException"
		  	       key="message.student-not-found"
		  	       path="/manageTeacherDFPStudent.do?method=list&amp;page=0"/>			
			<exception type="ServidorAplicacao.Servico.exceptions.NotAuthorizedException"
								key="message.teacher-not-belong-to-department"
								path="/teacherSearchForDFPStudentManagement.do?method=searchForm&amp;page=0"/>	   			

			<forward name="show-form" path="/manageTeacherDFPStudent.do?page=0&amp;method=list"/> 
			<forward name="successfull-edit" path="/manageTeacherDFPStudent.do?page=0&amp;method=list"/> 
			<forward name="successfull-read" path=""/>
			<forward name="successfull-delete" path="/manageTeacherDFPStudent.do?page=0&amp;method=list"/>
			<forward name="list-teacher-degree-final-project-students" path="show-teacher-dfp-students"/>   		
		</action>
 	   <!-- =======================================================================  -->

		<!-- =======  USE CASE : Edit Teacher WORK SERVICE ================================== -->
	   	<action path="/teacherSearchForTeacherInstitutionWorkingTimeManagement" 
	   			input="search-for-institution-working-time-management" name="teacherSearchForm" 
	   			scope="request"
	   			parameter="method"
	   			type="ServidorApresentacao.Action.framework.SearchAction"
	   			className="ServidorApresentacao.mapping.framework.SearchActionMapping">

			<set-property property="serviceName" value="FindTeachersService"/>
  			<set-property property="objectAttribute" value="infoTeacher"/>
  			<set-property property="listAttribute" value="infoTeacherList"/>
   			<set-property property="notFoundMessageKey" value="errors.teacher.not.found"/>

   			<forward name="search-form" path="search-for-institution-working-time-management"/>
  			<forward name="list-one" path="/manageTeacherInstitutionWorkingTime.do?method=list&amp;page=0"/> 
    		<forward name="list-many" path=""/>
	   	</action>

		<action path="/manageTeacherInstitutionWorkingTime"
					name="teacherInstitutionWorkingTimeForm"
		   	  		input="/manageTeacherInstitutionWorkingTime.do?method=prepareEdit&amp;page=0"
					type="ServidorApresentacao.Action.teacher.workingTime.CRUDTeacherInstitutionWorkingTimeAction"
					parameter="method"
					scope="request"
					className="ServidorApresentacao.mapping.framework.CRUDMapping"
					validate="true"> 
			<set-property property="editService" value="EditTeacherInstitutionWorkingTimeByOID"/>
			<set-property property="deleteService" value="DeleteTeacherInstitutionWorkingTimeByOID"/>
			<set-property property="readService" value="ReadTeacherInstitutionWorkingTimeByOID"/>
			<set-property property="oidProperty" value="idInternal"/>
			<set-property property="requestAttribute" value="infoTeacherInstitutionWorkingTime" />
			<set-property property="infoObjectClassName" value="DataBeans.teacher.workTime.InfoTeacherInstitutionWorkTime" />

			<exception type="ServidorAplicacao.Servico.exceptions.NotAuthorizedException"
								key="message.teacher-not-belong-to-department"
								path="/teacherSearchForTeacherInstitutionWorkingTimeManagement.do?method=searchForm&amp;page=0"/>	   			
			
			<forward name="show-form" path="edit-teacher-institution-working-time"/> 
			<forward name="successfull-edit" path="/manageTeacherInstitutionWorkingTime.do?page=0&amp;method=list"/> 
			<forward name="successfull-read" path=""/>
			<forward name="successfull-delete" path="/manageTeacherInstitutionWorkingTime.do?page=0&amp;method=list"/>
			<forward name="list-teacher-institution-working-time" path="list-teacher-institution-working-time"/>   		
		</action>
 	   <!-- =======================================================================  -->
 	   
		<!-- =======  USE CASE : List deparment teachers ===================================== -->
		<action path="/prepareListDepartmentTeachers"  
					type="ServidorApresentacao.Action.department.PrepareListDepartmentTeachersAction"  
					input="/index.do" 
					scope="request"> 
			<forward name="successfull-prepare" path="/listDepartmentTeachers.do?method=doSearch"/> 
		</action> 	 
		
		<action path="/listDepartmentTeachers"  
					type="ServidorApresentacao.Action.department.ListDepartmentTeachersAction"  
					name="objectOIDForm" 
					input="/index.do" 
					scope="request" 
					parameter="method"
					className="ServidorApresentacao.mapping.framework.SearchActionMapping"> 
			<set-property property="serviceName" value="ReadDepartmentTeachersService"/>
			<set-property property="objectAttribute" value="infoTeacher"/>
			<set-property property="listAttribute" value="infoTeacherList"/>
			<set-property property="notFoundMessageKey" value="message.not-found-teachers"/>
<!--			<set-property property="defaultSortBy" value="infoPerson.nome"/> -->
			<forward name="search-form" path=""/> 
			<forward name="list-one" path="listDepartmentTeachers"/> 
			<forward name="list-many" path="listDepartmentTeachers"/>
		</action> 	   
 	   <!-- =======================================================================  -->
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
    <controller processorClass="ServidorApresentacao.processor.FenixRequestProcessorWithTiles"/>

	<!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="ServidorApresentacao.DepartmentAdmOfficeResources" null="false"/>

	<!-- ========== Plug Ins Configuration ================================= -->
			
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
		value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-departmentAdmOffice.xml"/>
	</plug-in>
    <plug-in className="org.apache.struts.tiles.TilesPlugin" >
		<set-property property="definitions-config"
					  value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/departmentAdmOffice/tiles-departmentAdmOffice-definitions.xml,/WEB-INF/tiles/departmentAdmOffice/tiles-departmentAdmOffice-pages-definitions.xml" />
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate" value="true" />
	</plug-in>    

</struts-config>
