<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
    
    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />
    
    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
      
      <!-- Dynamic-FormBean for Password Change -->
      <form-bean name="changePasswordForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="oldPassword" type="java.lang.String" />
        <form-property name="newPassword" type="java.lang.String" />
        <form-property name="reTypeNewPassword" type="java.lang.String" />
      </form-bean>


     

      <!-- Bean for change of Application Information -->
      <form-bean name="changePersonalInfoForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
            <form-property name="page" type="java.lang.Integer" />

        	<form-property name="identificationDocumentType" type="java.lang.String" />
        	<form-property name="identificationDocumentNumber" type="java.lang.String" />
        	<form-property name="identificationDocumentIssuePlace" type="java.lang.String" />		
        	<form-property name="name" type="java.lang.String" />
        	<form-property name="sex" type="java.lang.String" />
        	<form-property name="maritalStatus" type="java.lang.String" />
        	<form-property name="nationality" type="java.lang.String" />
        	<form-property name="fatherName" type="java.lang.String" />
        	<form-property name="motherName" type="java.lang.String" />
        	<form-property name="birthPlaceParish" type="java.lang.String" />
        	<form-property name="birthPlaceMunicipality" type="java.lang.String" />
        	<form-property name="birthPlaceDistrict" type="java.lang.String" />
        	<form-property name="address" type="java.lang.String" />
        	<form-property name="place" type="java.lang.String" />
        	<form-property name="postCode" type="java.lang.String" />
        	<form-property name="addressParish" type="java.lang.String" />
        	<form-property name="addressMunicipality" type="java.lang.String" />
        	<form-property name="addressDistrict" type="java.lang.String" />
        	<form-property name="telephone" type="java.lang.String" />
        	<form-property name="mobilePhone" type="java.lang.String" />
        	<form-property name="email" type="java.lang.String" />
        	<form-property name="webSite" type="java.lang.String" />
        	<form-property name="contributorNumber" type="java.lang.String" />
        	<form-property name="occupation" type="java.lang.String" />
        	<form-property name="birthDay" type="java.lang.String" /> 
            <form-property name="birthMonth" type="java.lang.String" /> 
        	<form-property name="birthYear" type="java.lang.String" /> 
        	<form-property name="idIssueDateDay" type="java.lang.String" /> 
            <form-property name="idIssueDateMonth" type="java.lang.String" /> 
        	<form-property name="idIssueDateYear" type="java.lang.String" /> 
        	<form-property name="idExpirationDateDay" type="java.lang.String" /> 
            <form-property name="idExpirationDateMonth" type="java.lang.String" /> 
        	<form-property name="idExpirationDateYear" type="java.lang.String" /> 
        	<form-property name="username" type="java.lang.String" /> 
        	<form-property name="areaOfAreaCode" type="java.lang.String" /> 
      </form-bean>

	  <!-- Dynamic-FormBean for Qualification Edit-->
      <form-bean name="manageQualificationForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="mark"   type="java.lang.String" />
        <form-property name="year"   type="java.lang.String" />
        <form-property name="school" type="java.lang.String" />
        <form-property name="title"  type="java.lang.String" />
        <form-property name="idInternal" type="java.lang.Integer" />
        <form-property name="infoPerson#IdInternal" type="java.lang.Integer" />
      </form-bean>

    </form-beans>
    
    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
		<exception type="java.lang.Exception"
			       key="java.lang.Exception"
			       path="/naoExecutado.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.NotAuthorizedException"
			       key="ServidorAplicacao.NotAuthorizedException"
			       path="/naoAutorizado.do"
			       />
		<exception type="ServidorAplicacao.FenixServiceException"
		  	       key="ServidorAplicacao.FenixServiceException"
		  	       path="/naoExecutado.do"
		  	       handler="ServidorApresentacao.config.FenixExceptionHandler" />
	</global-exceptions>
    
    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
	  <forward name="index" path="index.do" redirect="true"/>
      <forward name="firstPage" path="/index.do"/>
      <forward name="logoff" path="/logoff.do" contextRelative="true"/>
    </global-forwards>
    
    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
      <!-- page fronting actions -->
      <action path="/changePasswordForward" type="ServidorApresentacao.Action.base.FenixForwardAction" forward="/changePassword.jsp"/>
<!--      <action path="/home" forward="/switchAction.do?prefix=&amp;page=/mainPortalPage.jsp"/>
-->
      <action path="/switchAction" type="org.apache.struts.actions.SwitchAction" />




	  <!-- Action for home portal -->
      <action path="/home" forward="/switchAction.do?prefix=&amp;page=/home.do"/>
      
      <action path="/switchAction" type="ServidorApresentacao.Action.base.FenixSwitchAction" />

     
      <action path="/index"
      		  type="ServidorApresentacao.Action.person.MainPage">
      		<forward name="ShowWelcomePage" path="/personMainPage.jsp"/>
      </action>
     
      <!-- Action for Visualization Of the Person's Personal Information -->
      <action path="/visualizePersonalInfo"
             input="personMainPage.jsp"
      	      type="ServidorApresentacao.Action.person.VisualizePersonalInfoAction">
      	  <forward name="Success" path="/visualizePersonalInfo.jsp"/>      	      
      </action>


      
      <!-- Action to Prepare the Change of the Candidate's Application Information -->
      <action path="/changePersonalInfoDispatchAction"
	     attribute="changePersonalInfoForm"
              name="changePersonalInfoForm"
             input="/changePersonalInfo.jsp"
	      validate="true"
		 parameter="method"
		     scope="request"
      	      type="ServidorApresentacao.Action.person.ChangePersonalInfoDispatchAction">
      	  <forward name="Success" path="/changeSuccess.jsp"/>
      	  <forward name="prepareReady" path="/changePersonalInfo.jsp"/>
      </action>

      <!-- Action to Change Candidate's Password -->
      <action path="/changePasswordForm"
      	      attribute="changePasswordForm"
      	      name="changePasswordForm"
              type="ServidorApresentacao.Action.person.ChangePersonPasswordAction"
              input="/changePassword.jsp"
              scope="request">
  	  <exception type="ServidorApresentacao.Action.exceptions.InvalidPasswordActionException"
				 key="ServidorApresentacao.Action.exceptions.InvalidPasswordActionException"
                 handler="ServidorApresentacao.config.FenixErrorExceptionHandler"
                 />
        <forward name="Success" path="/changePasswordSuccess.jsp"/>
      </action>

	  <action path="/readQualifications"
	  		  scope="request"
	  		  type="ServidorApresentacao.Action.person.ReadQualificationsAction">
  		  <forward name="show-form" path="view-qualifications"/>
  	  </action>

	  <!-- Action to manage a Qualification -->
   	  <action path="/manageQualificationForm"  
		   	  name="manageQualificationForm"
		   	  input="/manageQualificationForm?method=prepareEdit&amp;page=0"
   	          type="ServidorApresentacao.Action.person.ManageQualificationAction"    
   	          scope="request" 
   	          className="ServidorApresentacao.mapping.framework.CRUDMapping"> 
 		<set-property property="editService" value="EditQualification"/>
 		<set-property property="deleteService" value="DeleteQualification"/>
 		<set-property property="readService" value="ReadQualification"/>
  		<set-property property="oidProperty" value="idInternal"/>
  		<set-property property="RequestAttributes" value=""/>
 		<forward name="show-form" path="qualifications-management"/> 
 		<forward name="successfull-edit" path="qualification-edit"/> 
   		<forward name="successfull-read" path="qualification-read"/>
   		<forward name="successfull-delete" path="qualification-delete"/>
 	   </action>


    </action-mappings>
    
    <!-- ========== Controller Configuration ================================ -->
    <controller processorClass="ServidorApresentacao.processor.FenixRequestProcessor"/>
    
    <!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="ServidorApresentacao.ApplicationResources" null="false"/>
    
    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
                    value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-person.xml"/>
    </plug-in>
    
</struts-config>

