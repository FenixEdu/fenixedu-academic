<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>
	<!-- ========== Data Source Configuration =============================== -->

	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
		<form-bean name="parkingForm"
			type="org.apache.struts.validator.DynaValidatorForm"
			dynamic="true">
			<form-property name="parkingRequestState" type="java.lang.String" />
			<form-property name="parkingPartyClassification" type="java.lang.String" />
			<form-property name="personName" type="java.lang.String" />
			<form-property name="group" type="java.lang.Integer" />
			<form-property name="code" type="java.lang.Integer" />
			<form-property name="cardNumber" type="java.lang.Long"/>
			<form-property name="note" type="java.lang.String"/>
			<form-property name="method" type="java.lang.String" />
			<form-property name="page" type="java.lang.Integer" />
			<form-property name="deleteFirstCar" type="java.lang.Boolean" />
			<form-property name="deleteSecondCar" type="java.lang.Boolean" />		
			<form-property name="accepted" type="java.lang.String" />
		</form-bean>
	</form-beans>

	<!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
		<exception type="java.lang.Exception" key="error.Exception"
			handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler" />
		<exception
			type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException"
			key="error.NotAuthorized"
			handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler" />
	</global-exceptions>

	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
	</global-forwards>

	<!-- ========== Action Mapping Definitions =============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
		<action path="/index"
			type="net.sourceforge.fenixedu.presentationTier.Action.commons.VoidAction">
			<forward name="Success" path="parkingManagerIndex" />
		</action>

		<action path="/parking" scope="request" parameter="method"
			name="parkingForm"
			input="/parking.do?method=prepareEditParkingParty&amp;page=0"
			type="net.sourceforge.fenixedu.presentationTier.Action.parkingManager.ParkingManagerDispatchAction">
			<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key=""
				handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/>
			<forward name="showParkingRequests"	path="show-parking-requests" />
			<forward name="showParkingRequest" path="show-parking-request" />
			<forward name="searchParty" path="search-party" />
			<forward name="showParkingPartyRequests" path="show-party-parking-requests"/>
			<forward name="editParkingParty" path="edit-parking-party"/>			
		</action>

       	<action path="/externalPerson"
				type="net.sourceforge.fenixedu.presentationTier.Action.manager.ExternalPersonDA"
       			scope="request"
				input="/externalPerson.do?method=prepareCreate"
       			parameter="method">
			<exception type="net.sourceforge.fenixedu.domain.exceptions.DomainException" key=""
				handler="net.sourceforge.fenixedu.presentationTier.config.FenixDomainExceptionHandler"/>
       		<forward name="showSearch" path="df.search.external.person.before.create"/>
       		<forward name="showCreateForm" path="df.create.external.person"/>
       		<forward name="showCreatedPerson" path="df.show.created.external.person"/>
       		<forward name="showParkingParty" path="df.show.created.external.person"/>
       	</action>

		<action path="/exportParkingDB"
				type="net.sourceforge.fenixedu.presentationTier.Action.parkingManager.ExportParkingDataToAccessDatabaseDA"
				scope="request"
				input="/exportParkingDB.do?method=prepareExportFile"
				parameter="method">
       		<forward name="exportFile" path="export-file"/>
       	</action>
				
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
	<controller
		processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles" />

	<!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="resources.ParkingResources"
		null="false" />
	<message-resources parameter="resources.ParkingResources"
		key="PARKING_RESOURCES" null="false" />
	<message-resources parameter="resources.GlobalResources"
		key="GLOBAL_RESOURCES" null="false" />
	<message-resources parameter="resources.ApplicationResources"
		key="APPLICATION_RESOURCES" null="false" />
	<message-resources parameter="resources.EnumerationResources"
		key="ENUMERATION_RESOURCES" null="false" />
	<message-resources parameter="resources.ManagerResources"
		key="MANAGER_RESOURCES" null="false"/>

	<!-- ========== Plug Ins Configuration ================================= -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
		<set-property property="pathnames"
			value="/WEB-INF/validator-rules.xml" />
	</plug-in>
	<plug-in className="org.apache.struts.tiles.TilesPlugin">
		<set-property property="definitions-config"
			value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/parkingManager/tiles-parkingManager-definitions.xml,/WEB-INF/tiles/parkingManager/tiles-parkingManager-pages-definitions.xml" />
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate"
			value="true" />
	</plug-in>
</struts-config>
