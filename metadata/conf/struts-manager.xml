<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

	<!-- ========== Data Source Configuration =============================== -->

	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
 
    <form-bean name="deleteDegreesForm"
				type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                dynamic="true">        
            <form-property name="idInternal" type="java.lang.Integer" />
            <form-property name="page" type="java.lang.Integer" initial="0"/>
    </form-bean>  

    </form-beans>

	 <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
		<exception type="java.lang.Exception"
			       key="java.lang.Exception"
			       path="/naoExecutado.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.NotAuthorizedException"
			       key="ServidorAplicacao.NotAuthorizedException"
			       path="/naoAutorizado.do"
			       />
		<exception type="ServidorAplicacao.FenixServiceException"
		  	       key="ServidorAplicacao.FenixServiceException"
		  	       path="/naoExecutado.do"
		  	       handler="ServidorApresentacao.config.FenixExceptionHandler" />
		<exception type="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       key="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       path="/naoExistente.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler" /> 
	</global-exceptions>

	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
     <forward name="index" path="/index.do" redirect="true"/>
    <!--<forward name="firstPage" path="/switchAction.do?prefix=&amp;page=/loginPage.jsp"/>-->  
   	 <forward name="logoff" path="/logoff.do" contextRelative="true"/>
    </global-forwards>

	<!-- ========== Action Mapping Definitions =============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
    <!-- page fronting actions  -->
    <action path="/index" type="ServidorApresentacao.Action.base.FenixForwardAction" forward="df.page.main-page"/>
  
    <!--<action	path="/index"
            type="ServidorApresentacao.Action.manager.ReadDegreesAction">    
            <forward name="readDegrees" path="/readDegrees.jsp"/>          
	</action>-->
     
   
	 <!-- Action for reading all degrees  -->
      <action path="/readDegrees"
             input="mainPageInput.do"
      	      type="ServidorApresentacao.Action.manager.ReadDegreesAction">
      	  <forward name="readDegrees" path="df.page.read-degrees"/>      	      
      </action>
      
	 <!-- Action for reading a degree -->
      <action path="/readDegree"
             input="readDegreesInput.do"
      	      type="ServidorApresentacao.Action.manager.ReadDegreeAction">
      	  <forward name="viewDegree" path="/df.page.read-degree"/>      	      
      </action>
         
	<!-- Action for deleting a degree --> 
     
      <action 
      		 name="deleteDegreesForm"
      		 input="readDegreesInput.do"
      	     path="/deleteDegrees"
      	     type="ServidorApresentacao.Action.manager.DeleteDegreesAction">
             
	<exception type="ServidorApresentacao.Action.exceptions.CantDeleteActionException"
         	   key="ServidorApresentacao.Action.exceptions.CantDeleteActionException"
               handler="ServidorApresentacao.config.FenixErrorExceptionHandler"
               /> 
             
      	  <forward name="readDegrees" path="df.page.read-degrees"/>      	      
      </action>
      
      	<!-- Action for deleting a set of degrees -->
       		
       <action path="/degreesToDelete"
      	     input="selectDegreesInput.do"
      	     type="ServidorApresentacao.Action.manager.DegreesToDeleteAction">
      	  <forward name="degreesToDelete" path="df.page.degrees-to-delete"/>      	      
      </action>
      
     <action path="/readDegreesInput"
      	      type="ServidorApresentacao.Action.commons.VoidAction">
      	  <forward name="Success" path="df.page.read-degrees"/>      	      
      </action>
      
      <action path="/mainPageInput"
      	      type="ServidorApresentacao.Action.commons.VoidAction">
      	  <forward name="Success" path="df.page.main-page"/>      	      
      </action>
      
      <action path="/selectDegreesInput"
      	      type="ServidorApresentacao.Action.commons.VoidAction">
      	  <forward name="Success" path="df.page.degrees-to-delete"/>      	      
      </action>
      
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
    <controller processorClass="ServidorApresentacao.processor.FenixRequestProcessorWithTiles"/>

	<!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="ServidorApresentacao.ApplicationResources" />

	<!-- ========== Plug Ins Configuration ================================= -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
		value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-manager.xml"/>
	</plug-in>
	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
		<set-property property="definitions-config"
					  value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/manager/tiles-manager-definitions.xml,/WEB-INF/tiles/manager/tiles-manager-pages-definitions.xml" />
		<set-property property="moduleAware" value="true" />
		<set-property property="definitions-parser-validate" value="true" />
	</plug-in>    

</struts-config>