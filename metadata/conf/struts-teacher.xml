<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
	"http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

	<!-- ========== Data Source Configuration =============================== -->

	<!-- ========== Form Bean Definitions ================================== -->
	<form-beans type="org.apache.struts.action.ActionFormBean">
	
	  <!-- ERROR HANDLING  -->
      <!-- Dynamic-FormBean for Error handling -->
      <form-bean name="errorMailForm" 
                 type="org.apache.struts.validator.DynaValidatorForm"
                 dynamic="true">
        <form-property name="email" type="java.lang.String" />
        <form-property name="subject" type="java.lang.String" />
        <form-property name="body" type="java.lang.String" />
      </form-bean>
     <!--curriculum forms --> 
     <form-bean name="executionCourseCurriculumForm"
		type="ServidorApresentacao.validator.form.FenixDynaValidatorForm" dynamic="true">		
		<form-property name="generalObjectives" type="java.lang.String" />
		<form-property name="operacionalObjectives" type="java.lang.String" />
		<form-property name="program" type="java.lang.String" />
		<form-property name="page" type="java.lang.Integer" initial="0"/>
	</form-bean>
	
    	<form-bean name="executionCourseObjectivesForm"
    		type="ServidorApresentacao.validator.form.FenixDynaValidatorForm" dynamic="true">		
    		<form-property name="generalObjectives" type="java.lang.String" />
    		<form-property name="operacionalObjectives" type="java.lang.String" />
    		<form-property name="page" type="java.lang.Integer" initial="0"/>
    	</form-bean>
    	
    		
    <form-bean name="executionCourseProgramForm"
		type="ServidorApresentacao.validator.form.FenixDynaValidatorForm" dynamic="true">
		<form-property name="program" type="java.lang.String" />
		<form-property name="page" type="java.lang.Integer" initial="0"/>
	</form-bean>
	<!-- Announcement Forms  -->
    <form-bean name="insertAnnouncementForm"
    	type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
		dynamic="true">        
        <form-property name="title" type="java.lang.String" />
        <form-property name="information" type="java.lang.String" />
        <form-property name="page" type="java.lang.Integer" initial="0" />
    </form-bean>    			
    	
	
	
	
	
	<form-bean name="bibliographicReferenceForm"
				type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                dynamic="true">        
            <form-property name="title" type="java.lang.String" />
            <form-property name="authors" type="java.lang.String" />
            <form-property name="reference" type="java.lang.String" />
            <form-property name="year" type="java.lang.String" />
            <form-property name="optional" type="java.lang.String" />
            <form-property name="page" type="java.lang.Integer" initial="0" />
            <form-property name="method" type="java.lang.String"/>
	</form-bean>    			
	<!--Teacher form -->
   <form-bean name="teacherForm"
				type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                dynamic="true">        
            <form-property name="teacherNumber" type="java.lang.String" />
            <form-property name="page" type="java.lang.Integer" initial="0"/>
     </form-bean>    	

	<form-bean name="alternativeSiteForm"
				type="ServidorApresentacao.validator.form.FenixDynaValidatorForm"
                dynamic="true">        
            <form-property name="siteAddress" type="java.lang.String" />
            <form-property name="mail" type="java.lang.String" />               
            <form-property name="method" type="java.lang.String" />    
            <form-property name="page" type="java.lang.Integer" initial="0" />           
	</form-bean>    			



    </form-beans>

	 <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
		<exception type="java.lang.Exception"
			       key="java.lang.Exception"
			       path="/naoExecutado.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler"/>
		<exception type="ServidorAplicacao.NotAuthorizedException"
			       key="ServidorAplicacao.NotAuthorizedException"
			       path="/naoAutorizado.do"
			       />
		<exception type="ServidorAplicacao.FenixServiceException"
		  	       key="ServidorAplicacao.FenixServiceException"
		  	       path="/naoExecutado.do"
		  	       handler="ServidorApresentacao.config.FenixExceptionHandler" />
		<exception type="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       key="ServidorAplicacao.Servico.ExcepcaoInexistente"
			       path="/naoExistente.do"
			       handler="ServidorApresentacao.config.FenixExceptionHandler" />
	</global-exceptions>

	<!-- ========== Global Forward Definitions =============================== -->
	<global-forwards type="org.apache.struts.action.ActionForward">
     <forward name="index" path="/index.do" redirect="true"/>
     <forward name="firstPage" path="/switchAction.do?prefix=&amp;page=/loginPage.jsp"/>
    </global-forwards>

	<!-- ========== Action Mapping Definitions =============================== -->
	<action-mappings type="org.apache.struts.action.ActionMapping">
     <action path="/naoExecutado" forward="/error.jsp"/>
	 <action path="/naoAutorizado" forward="/notAuthorizedError.jsp"/>

	<action     path="/bibliographicReferenceManager"
				parameter="method"      			
				scope="session"
      			name="bibliographicReferenceForm"
      			input="/editBibliographicReference.jsp"
                type="ServidorApresentacao.Action.teacher.BibliographicReferenceManagerDispatchAction"            
                validate="true">	           
				<forward name="editBibliographicReference" path="/editBibliographicReference.jsp"/>
				<forward name="bibliographyManagement" path="/bibliographyManagement.jsp"/>
	</action>             
	
	<action     path="/alternativeSite"   
				parameter="method"   			
				scope="session"
      			name="alternativeSiteForm"
      			input="/alternativeSiteManagement.jsp"
                type="ServidorApresentacao.Action.teacher.AlternativeSiteManagementAction"            
                validate="true">	           
				<forward name="editAlternativeSite" path="/alternativeSiteManagement.jsp"/>				
	</action>             
	

	<!-- access to announcement management -->
	<action 
		type="ServidorApresentacao.Action.teacher.AccessAnnouncementManagementAction" 
		path="/accessAnnouncementManagementAction">
        <forward name="AnnouncementManagement" path="/announcementManagementAction.do?method=showAnnouncements" />
        <forward name="EditAnnouncement" path="/announcementManagementAction.do?method=prepareCreateAnnouncement" />        
	</action>

	<!-- input of actions for announcement management -->	
	<action name="insertAnnouncementForm"
		type="ServidorApresentacao.Action.teacher.AnnouncementManagementDispatchAction"
		scope="session"
		parameter="method"      			
        path="/announcementManagementAction" 
        input="/insertAnnouncement.jsp"
		validate="true">
		<forward name="accessAnnouncementManagement" path="/accessAnnouncementManagementAction.do"/>	            

        <forward name="showAnnouncements" path="/announcementManagement.jsp" />
        
        <forward name="insertAnnouncement" path="/insertAnnouncement.jsp" />
		<forward name="editAnnouncement" path="/editAnnouncement.jsp" />
		<forward name="deleteAnnouncement" path="/deleteAnnouncement.jsp" />
	</action>

	<action name="insertAnnouncementForm"
		type="ServidorApresentacao.Action.teacher.AnnouncementManagementDispatchAction"
		scope="session"
		parameter="method"      			
        path="/editAnnouncement" 
        input="/editAnnouncement.jsp"
		validate="true">
		<forward name="accessAnnouncementManagement" path="/accessAnnouncementManagementAction.do"/>	            

        <forward name="showAnnouncements" path="/announcementManagement.jsp" />
	</action>

	<!-- ExceptionHandling -->   
      <action parameter="method"
              name="errorMailForm" 
              path="/exceptionHandling"
              scope="request"
              type="ServidorApresentacao.Action.ExceptionHandlingAction"     
              >
        
      </action>
	 <!-- Action For LogOff -->
      <action path="/logoff"
      	      type="ServidorApresentacao.Action.commons.LogOffAction">
      	  <forward name="Success" path="/index.do"/>
      </action>
	
	<!-- Actions For Teachers  -->
	<action 
		input="/viewTeachers.jsp"
		parameter="method"
		path="/teachersManagerDA"
        type="ServidorApresentacao.Action.teacher.TeacherManagerDispatchAction"
        >    
	<exception type="ServidorApresentacao.Action.exceptions.notAuthorizedActionDeleteException"
         	   key="ServidorApresentacao.Action.exceptions.notAuthorizedActionDeleteException"
               handler="ServidorApresentacao.config.FenixErrorExceptionHandler"
               /> 
                	
    <forward name="viewTeachers" path="/viewTeachers.jsp"/>  
     
    
	</action>
	<action 
		name="teacherForm"
		input="/associateTeacher.jsp"
		parameter="method"
		path="/teacherManagerDA"
		type="ServidorApresentacao.Action.teacher.TeacherManagerDispatchAction"
        validate="true">    
	
    <exception type="ServidorApresentacao.Action.exceptions.ExistingActionException"
         	   key="ServidorApresentacao.Action.exceptions.ExistingActionException"
               handler="ServidorApresentacao.config.FenixErrorExceptionHandler"
               />       
    <exception type="ServidorApresentacao.Action.exceptions.InvalidArgumentsActionException"
         	   key="ServidorApresentacao.Action.exceptions.InvalidArgumentsActionException"
               handler="ServidorApresentacao.config.FenixErrorExceptionHandler"
               />                   	
    <forward name="viewTeachers" path="/viewTeachers.jsp"/>  
    <forward name="associateTeacher" path="/associateTeacher.jsp"/>    
    
	</action>
	<!-- Actions For Objectives and Program -->
	<action 
		name="executionCourseObjectivesForm"
		parameter="method"
		input="/editObjectives.jsp"
		path="/objectivesManagerDA"
		type="ServidorApresentacao.Action.teacher.CurriculumManagerDispatchAction"
        validate="true">    
    <forward name="viewObjectives" path="/viewObjectives.jsp"/>    
    <forward name="editObjectives" path="/editObjectives.jsp"/>
     
	</action>
	
	<action 
		name="executionCourseProgramForm"
		parameter="method"
		input="/editProgram.jsp"
		path="/programManagerDA"
		type="ServidorApresentacao.Action.teacher.CurriculumManagerDispatchAction"
        validate="true"	>    
     <forward name="viewProgram" path="/viewProgram.jsp"/>
     <forward name="editProgram" path="/editProgram.jsp"/>
     
	</action>
	
	<action 
		name="executionCourseCurriculumForm"
		parameter="method"
		input="/viewObjectives.jsp"
		path="/curriculumManagerDA"
		type="ServidorApresentacao.Action.teacher.CurriculumManagerDispatchAction"
        validate="true"	>    
       <forward name="viewCurriculum" path="/navbar.jsp"/>
	</action>
	
	<action	path="/index"
        type="ServidorApresentacao.Action.teacher.TeacherLoginAction"
		>    
     <forward name="viewProfessorships" path="/viewProfessorships.jsp"/>         
	</action>
	
	<action path="/viewSite"
        type="ServidorApresentacao.Action.teacher.ReadSite">    
     <forward name="viewSite" path="/navbar.jsp"/>         
	</action>
	</action-mappings>

	<!-- ========== Controller Configuration ================================ -->
    <controller processorClass="ServidorApresentacao.processor.FenixRequestProcessor"/>

	<!-- ========== Message Resources Definitions ============================ -->
	<message-resources parameter="ServidorApresentacao.ApplicationResources" />

	<!-- ========== Plug Ins Configuration ================================= -->
	<plug-in className="org.apache.struts.validator.ValidatorPlugIn">
      <set-property property="pathnames" 
		value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-teacher.xml"/>
	</plug-in>

</struts-config>