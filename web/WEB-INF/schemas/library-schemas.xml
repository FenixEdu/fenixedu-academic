<schema name="library.thesis.search" type="net.sourceforge.fenixedu.dataTransferObject.thesis.ThesisSearchBean">
	<slot name="text" key="label.thesis.search.freetext" layout="input-with-comment">
		<property name="bundle" value="LIBRARY_RESOURCES" />
		<property name="comment" value="label.thesis.search.freetext.help" />
	</slot>
	<slot name="state" key="label.thesis.search.state">
		<property name="key" value="true" />
		<property name="bundle" value="ENUMERATION_RESOURCES" />
		<property name="defaultText" value="ThesisLibraryState.all" />
	</slot>
	<slot name="year" key="label.thesis.search.year" layout="menu-select">
		<property name="providerClass"
			value="net.sourceforge.fenixedu.presentationTier.renderers.providers.ThesisExecutionYearsProvider" />
		<property name="choiceType" value="net.sourceforge.fenixedu.domain.ExecutionYear" />
		<property name="format" value="${year}" />
		<property name="key" value="true" />
		<property name="bundle" value="LIBRARY_RESOURCES" />
		<property name="defaultText" value="label.thesis.search.year.all" />
		<property name="saveOptions" value="true" />
	</slot>
</schema>

<schema name="library.thesis.list" type="net.sourceforge.fenixedu.domain.thesis.Thesis"
	bundle="LIBRARY_RESOURCES">
	<slot name="enrolment.executionYear.name" key="label.thesis.year" />
	<slot name="libraryState" key="label.thesis.state" />
	<slot name="libraryReference" key="label.thesis.library.ref" layout="null-as-label" />
	<slot name="finalFullTitle" key="label.thesis.title" layout="short">
		<property name="length" value="60" />
	</slot>
	<slot name="student.person" key="label.thesis.author" layout="name-with-alias" />
	<slot name="libraryOperationPerformer" key="label.thesis.library.operator" layout="null-as-label">
		<property name="subLayout" value="values" />
		<property name="subSchema" value="library.thesis.operator" />
	</slot>
</schema>

<schema name="library.thesis.operator" type="net.sourceforge.fenixedu.domain.Person">
	<slot name="mostImportantAlias" />
</schema>

<schema name="library.thesis.author" type="net.sourceforge.fenixedu.domain.thesis.Thesis">
	<slot name="enrolment.studentCurricularPlan.registration.student.person.name" key="label.thesis.author.name"
		layout="person-name" />
	<slot name="enrolment.studentCurricularPlan.registration.student.number" key="label.thesis.author.number" />
	<slot name="enrolment.studentCurricularPlan.degree.name" key="label.thesis.author.degree" />
	<slot name="department.name" key="label.thesis.author.department" />
</schema>

<schema name="library.thesis.state.null" type="net.sourceforge.fenixedu.domain.thesis.Thesis">
	<slot name="libraryState" key="label.thesis.state" />
</schema>

<schema name="library.thesis.state" type="net.sourceforge.fenixedu.domain.thesis.ThesisLibraryOperation">
	<slot name="state" key="label.thesis.state" />
	<slot name="libraryReference" key="label.thesis.library.ref" />
    <!--  		layout="tabular-nonNullValues" />-->
	<slot name="pendingComment" key="label.thesis.library.comment" />
	<slot name="performer" layout="name-with-alias" key="label.thesis.library.operator" />
</schema>

<schema name="library.thesis.validate" type="net.sourceforge.fenixedu.domain.thesis.ThesisLibraryArchiveOperation"
	constructor="thesisId, performerId, libraryReference">
	<slot name="thesisId" hidden="true" />
	<slot name="performerId" hidden="true" />
	<slot name="libraryReference" key="label.thesis.library.ref"
		validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator" />
</schema>

<schema name="library.thesis.pending" type="net.sourceforge.fenixedu.domain.thesis.ThesisLibraryPendingOperation"
	constructor="thesisId, performerId, pendingComment">
	<slot name="thesisId" hidden="true" />
	<slot name="performerId" hidden="true" />
	<slot name="pendingComment" key="label.thesis.library.comment" layout="longText">
		<property name="columns" value="40" />
		<property name="rows" value="3" />
	</slot>
</schema>

<schema name="library.thesis.cancel" type="net.sourceforge.fenixedu.domain.thesis.ThesisLibraryCancelOperation"
	constructor="thesisId, performerId">
	<slot name="thesisId" hidden="true" />
	<slot name="performerId" hidden="true" />
</schema>

<schema name="library.thesis.details" type="net.sourceforge.fenixedu.domain.thesis.Thesis"
	bundle="LIBRARY_RESOURCES">
	<slot name="finalTitle" key="label.thesis.title" />
	<slot name="finalSubtitle" key="label.thesis.subtitle" layout="null-as-label" />
	<slot name="thesisAbstract" key="label.thesis.note" layout="short">
		<property name="length" value="300" />
	</slot>
	<slot name="keywords" key="label.thesis.keywords" />
	<slot name="language" key="label.thesis.language" />
	<slot name="orientation" layout="list" key="label.thesis.orientation">
		<property name="eachSchema" value="thesis.participant.name-with-alias" />
		<property name="eachLayout" value="values" />
		<property name="classes" value="nobullet indent0 mvert0" />
	</slot>
	<slot name="enrolment.executionYear.name" key="label.thesis.year" />
	<slot name="extendedAbstract.filename" layout="link" key="label.thesis.abstract.file">
		<property name="useParent" value="true" />
		<property name="linkFormat" value="${extendedAbstract.downloadUrl}" />
		<property name="contextRelative" value="false" />
	</slot>
	<slot name="dissertation.filename" layout="link" key="label.thesis.file">
		<property name="useParent" value="true" />
		<property name="linkFormat" value="${dissertation.downloadUrl}" />
		<property name="contextRelative" value="false" />
	</slot>
</schema>

<schema name="thesis.participant.name-with-alias" type="net.sourceforge.fenixedu.domain.thesis.ThesisEvaluationParticipant">
	<slot name="person" layout="name-with-alias" />
</schema>

<!-- Old Library Thesis -->
<!--
<schema name="library.thesis.list" type="net.sourceforge.fenixedu.domain.research.result.publication.Thesis" bundle="LIBRARY_RESOURCES">
    <slot name="authorsNames" key="label.thesis.authors" layout="person-name"/>
    <slot name="title" key="label.thesis.title" layout="short">
    	<property name="length" value="60"/>
    </slot>
    <slot name="yearMonth" layout="year-month" key="label.thesis.date"/>
</schema>

<schema name="library.thesis.list.author" type="net.sourceforge.fenixedu.domain.Person">
	<slot name="name" layout="person-name"/>
</schema>

<schema name="library.thesis.details" type="net.sourceforge.fenixedu.domain.research.result.publication.Thesis" bundle="LIBRARY_RESOURCES">
    <slot name="authorsNames" key="label.thesis.authors" layout="person-name"/>
	<slot name="title" key="label.thesis.title"/>
	<slot name="note" key="label.thesis.note" layout="short">
		<property name="length" value="300"/>
	</slot>
	<slot name="keywords" key="label.thesis.keywords"/>	
	<slot name="language" key="label.thesis.language"/>
    <slot name="yearMonth" layout="year-month" key="label.thesis.date"/>
	<slot name="numberPages" key="label.thesis.pages"/>
	<slot name="url" key="label.thesis.url">
		<property name="link" value="true"/>
	</slot>
    <slot name="scientificArea" key="label.thesis.scientific.area"/>
</schema>

<schema name="library.thesis.details.edit" type="net.sourceforge.fenixedu.domain.research.result.publication.Thesis" bundle="LIBRARY_RESOURCES">
    <slot name="authorsNames" key="label.thesis.authors" layout="person-name" read-only="true"/>
	<slot name="title" key="label.thesis.title" read-only="true"/>
	<slot name="note" key="label.thesis.note" layout="short" read-only="true">
		<property name="length" value="300"/>
	</slot>
	<slot name="keywords" key="label.thesis.keywords" read-only="true"/>	
	<slot name="language" key="label.thesis.language" read-only="true"/>
    <slot name="yearMonth" layout="year-month" key="label.thesis.date" read-only="true"/>
	<slot name="numberPages" key="label.thesis.pages"/>
	<slot name="url" key="label.thesis.url">
		<property name="link" value="true"/>
	</slot>
    <slot name="scientificArea" key="label.thesis.scientific.area">
    	<property name="size" value="50"/>
    </slot>
</schema>

<schema name="library.thesis.list.exported" type="net.sourceforge.fenixedu.domain.research.result.publication.Thesis" bundle="LIBRARY_RESOURCES">
    <slot name="authorsNames" key="label.thesis.authors" layout="person-name"/>
    <slot name="title" key="label.thesis.title" layout="short"/>
    <slot name="yearMonth" layout="year-month" key="label.thesis.date"/>
</schema>
-->
<!-- Library Card -->

<schema name="library.card.list" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
    <slot name="partyClassification" key="label.card.category"/>
    <slot name="number" key="label.card.number"/>
    <slot name="userName" key="label.card.name"/>
    <slot name="unitName" key="label.card.unitName"/>    
    <slot name="phone" key="label.card.phone"/>
    <slot name="mobile" key="label.card.mobile"/>
    <slot name="pinToShow" key="label.card.pin"/>    
</schema>

<schema name="library.card.generate" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pin" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="60"/>
	</slot>
	<slot name="unitName" key="label.card.unitName" read-only="true"/>
	<slot name="chosenUnitName" key="label.card.unitNameToCard" layout="menu-select" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="eachLayout" value="this-does-not-exist" />
        <property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardUnitsProvider"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" read-only="true"/>
	<slot name="unlimitedCard" key="label.card" layout="radio-postback">
        <property name="trueLabel" value="label.card.date.unlimited"/>
        <property name="falseLabel" value="label.card.date.limited"/>
        <property name="destination" value="changeDateVisibility"/>
        <property name="classes" value="nobullet liinline"/>
    </slot>	
</schema>

<schema name="library.card.generate.employee" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pin" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="60"/>
	</slot>
	<slot name="unitName" key="label.card.unitName" read-only="true"/>
	<slot name="chosenUnitName" key="label.card.unitNameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="41"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" read-only="true"/>
	<slot name="unlimitedCard" key="label.card" layout="radio-postback">
        <property name="trueLabel" value="label.card.date.unlimited"/>
        <property name="falseLabel" value="label.card.date.limited"/>
        <property name="destination" value="changeDateVisibility"/>
        <property name="classes" value="nobullet liinline"/>
    </slot>	
</schema>

<schema name="library.card.generate.person" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pin" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="60"/>
	</slot>
	<slot name="unitName" key="label.card.unitName" read-only="true"/>
	<slot name="chosenUnitName" key="label.card.unitNameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="41"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" layout="menu-select">
	    <property name="eachLayout" value="this-does-not-exist" />
    	<property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardCategoriesProvider"/>
		<property name="nullOptionHidden" value="true"/>		
	</slot>
	<slot name="unlimitedCard" key="label.card" layout="radio-postback">
        <property name="trueLabel" value="label.card.date.unlimited"/>
        <property name="falseLabel" value="label.card.date.limited"/>
        <property name="destination" value="changeDateVisibility"/>
        <property name="classes" value="nobullet liinline"/>
    </slot>	
</schema>

<schema name="library.card.generate.date" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="validUntil" key="label.card.date">
		<validator class="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator"/>
		<validator class="pt.ist.fenixWebFramework.renderers.validators.DateValidator"/>
	</slot>
</schema>

<schema name="library.card.generated" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number"/>
	<slot name="pinToShow" key="label.card.pin"/>	
	<slot name="userName" key="label.card.name"/>
	<slot name="person" layout="values-dash" schema="library.card.person.adress" key="label.card.person.address"/>
	<slot name="person.email" key="label.card.person.email"/>
	<slot name="phone" key="label.card.phone"/>
    <slot name="mobile" key="label.card.mobile"/>
	<slot name="unitName" layout="menu-select" key="label.card.unitName"/>
	<slot name="partyClassification" key="label.card.category"/>
    <slot name="validUntil" key="label.card.date"/>
</schema>

<schema name="library.card.edit.teacher" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pinToShow" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="60"/>
	</slot>
	<slot name="person" layout="values-dash" schema="library.card.person.adress" key="label.card.person.address" read-only="true"/>
	<slot name="person.email" key="label.card.person.email" read-only="true"/>
	<slot name="phone" key="label.card.phone" read-only="true"/>
    <slot name="mobile" key="label.card.mobile" read-only="true"/>
    <slot name="unitName" key="label.card.unitName" read-only="true"/>
	<slot name="chosenUnitName" key="label.card.unitNameToCard" layout="menu-select" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="eachLayout" value="this-does-not-exist" />
        <property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardUnitsProvider"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" layout="menu-select">
	    <property name="eachLayout" value="this-does-not-exist" />
    	<property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardCategoriesProvider"/>
		<property name="nullOptionHidden" value="true"/>		
	</slot>
    <slot name="validUntil" key="label.card.date">
  		<validator class="pt.ist.fenixWebFramework.renderers.validators.DateValidator"/>
	</slot>
</schema>

<schema name="library.card.edit" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pinToShow" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="45"/>
	</slot>
	<slot name="person" layout="values-dash" schema="library.card.person.adress" key="label.card.person.address" read-only="true"/>
	<slot name="person.email" key="label.card.person.email" read-only="true"/>
	<slot name="phone" key="label.card.phone" read-only="true"/>
    <slot name="mobile" key="label.card.mobile" read-only="true"/>
    <slot name="unitName" key="label.card.unitName" read-only="true"/>
		<slot name="chosenUnitName" key="label.card.unitNameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="50"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" layout="menu-select">
	    <property name="eachLayout" value="this-does-not-exist" />
    	<property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardCategoriesProvider"/>
		<property name="nullOptionHidden" value="true"/>		
	</slot>	
    <slot name="validUntil" key="label.card.date">
   		<validator class="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator"/>
		<validator class="pt.ist.fenixWebFramework.renderers.validators.DateValidator"/>
    </slot>
</schema>

<schema name="library.card.edit.person" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardDTO" bundle="LIBRARY_RESOURCES">
	<slot name="number" key="label.card.number" read-only="true"/>
	<slot name="pinToShow" key="label.card.pin" read-only="true"/>
	<slot name="person.nickname" key="label.card.name" read-only="true"/>
	<slot name="userName" key="label.card.nameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="45"/>
	</slot>
	<slot name="person" layout="values-dash" schema="library.card.person.adress" key="label.card.person.address" read-only="true"/>
	<slot name="person.email" key="label.card.person.email" read-only="true"/>
	<slot name="phone" key="label.card.phone" read-only="true"/>
    <slot name="mobile" key="label.card.mobile" read-only="true"/>
    <slot name="unitName" key="label.card.unitName" read-only="true"/>
		<slot name="chosenUnitName" key="label.card.unitNameToCard" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="60"/>
		<property name="maxLength" value="50"/>
	</slot>
	<slot name="partyClassification" key="label.card.category" layout="menu-select">
	    <property name="eachLayout" value="this-does-not-exist" />
    	<property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardCategoriesProvider"/>
		<property name="nullOptionHidden" value="true"/>		
	</slot>
    <slot name="validUntil" key="label.card.date">
  		<validator class="pt.ist.fenixWebFramework.renderers.validators.DateValidator"/>
	</slot>
</schema>

<schema name="library.card.person.adress" type="net.sourceforge.fenixedu.domain.Person">
	<slot name="address"/>
	<slot name="parishOfResidence"/>
	<slot name="postalCode"/>
</schema>

<schema name="library.card.search" type="net.sourceforge.fenixedu.dataTransferObject.library.LibraryCardSearch">
	<slot name="partyClassification" key="label.card.category" layout="menu-select">
	    <property name="eachLayout" value="this-does-not-exist" />
    	<property name="providerClass" value="net.sourceforge.fenixedu.presentationTier.renderers.providers.LibraryCardCategoriesProvider"/>
		<property name="nullOptionHidden" value="true"/>		
	</slot>
	<slot name="userName" key="label.card.name" bundle="LIBRARY_RESOURCES">
		<property name="size" value="40"/>
	</slot>
	<slot name="number" key="label.card.number" bundle="LIBRARY_RESOURCES"/>	
</schema>

<schema name="library.card.create.person" type="net.sourceforge.fenixedu.dataTransferObject.person.ExternalPersonBean" bundle="LIBRARY_RESOURCES">
	 <slot name="personName" layout="autoComplete" key="label.card.name" validator="pt.ist.fenixWebFramework.renderers.validators.RequiredValidator">
		<property name="size" value="80"/>
		<property name="labelField" value="name"/>		
		<property name="rawSlotName" value="name"/>		
		<property name="format" value="${text}"/>
		<property name="indicatorShown" value="true"/>		
		<property name="serviceName" value="SearchExternalPersons"/>
		<property name="serviceArgs" value="slot=name"/>
		<property name="minChars" value="3"/>
		<property name="errorStyleClass" value="error0"/>
	</slot>
	<slot name="phone" key="label.card.person.phone">
		<property name="size" value="15"/>
		<property name="maxLength" value="15"/>
	</slot>
	<slot name="mobile" key="label.card.person.mobile">
		<property name="size" value="15"/>
		<property name="maxLength" value="15"/>
	</slot>
	<slot name="email" key="label.card.person.email" validator="net.sourceforge.fenixedu.presentationTier.renderers.validators.NotRequiredEmailValidator">
		<property name="size" value="60"/>
	</slot>	
</schema>

<schema name="library.card.create.unitPerson" type="net.sourceforge.fenixedu.dataTransferObject.person.ExternalPersonBean" bundle="LIBRARY_RESOURCES">
	<slot name="name" key="label.card.name" read-only="true"/>
	<slot name="phone" key="label.card.person.phone" read-only="true"/>
	<slot name="mobile" key="label.card.person.mobile" read-only="true"/>
	<slot name="email" key="label.card.person.email" read-only="true"/>
	<slot name="idDocumentType" key="label.idDocumentType" bundle="MANAGER_RESOURCES"/>
	<slot name="documentIdNumber" key="label.identificationNumber" bundle="MANAGER_RESOURCES"/>
	<slot name="unitNameDomainReference" layout="autoComplete" key="label.card.unitName">
		<property name="size" value="80"/>
		<property name="labelField" value="unit.name"/>		
		<property name="rawSlotName" value="unitName"/>		
		<property name="format" value="${unit.presentationNameWithParents}"/>
		<property name="indicatorShown" value="true"/>		
		<property name="serviceName" value="SearchExternalUnits"/>
		<property name="serviceArgs" value="slot=name"/>	
		<property name="minChars" value="3"/>
		<property name="errorStyleClass" value="error0"/>
	</slot>
</schema>