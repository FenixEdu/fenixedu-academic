<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC
      "-//Apache Software Foundation//DTD Struts Configuration 1.1//EN"
      "http://jakarta.apache.org/struts/dtds/struts-config_1_1.dtd">
<struts-config>

    <!-- ========== Data Source Configuration =============================== -->
    <data-sources />

    <!-- ========== Form Bean Definitions ================================== -->
    <form-beans type="org.apache.struts.action.ActionFormBean">
        <form-bean name="thesesForm" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
            <form-property name="thesesIDs" type="java.lang.Integer[]" />
        </form-bean>

        <form-bean name="none" type="org.apache.struts.validator.DynaValidatorForm" dynamic="true">
        </form-bean>
    </form-beans>

    <!-- ========== Global Exception Definitions ============================== -->
	<global-exceptions>
        <exception type="java.lang.Exception" key="error.Exception" handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"/>
		<exception type="net.sourceforge.fenixedu.applicationTier.Servico.exceptions.NotAuthorizedException" key="error.NotAuthorized" handler="net.sourceforge.fenixedu.presentationTier.config.FenixContainerExceptionHandler"/>
	</global-exceptions>

    <!-- ========== Global Forward Definitions =============================== -->
    <global-forwards type="org.apache.struts.action.ActionForward">
        <forward name="index" path="/index.do" redirect="true"/>
        <forward name="logoff" path="/logoff.do" contextRelative="true"/>
        <forward name="redirect" path="/redirect.do" contextRelative="true"/>
        <forward name="home" path="/mainPortalPage.jsp" redirect="true" contextRelative="true"/>
    </global-forwards>

    <!-- ========== Action Mapping Definitions =============================== -->
    <action-mappings type="org.apache.struts.action.ActionMapping">
    	<action path="/index" type="net.sourceforge.fenixedu.presentationTier.Action.commons.VoidAction">
    		<forward name="Success" path="library-index"/>
    	</action>

        <action path="/theses/search" parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.SearchThesesDA">
            <forward name="search" path="theses-search"/>
        </action>
    	
    	<action path="/theses/validate" parameter="method" name="none" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.ValidateThesisDA">
    		<forward name="view" path="thesis-validate"/>
    	</action>

    	<action path="/theses/list" parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.ListThesesDA">
    		<forward name="list" path="theses-list"/>
    	</action>

    	<action path="/theses/listConfirmed" parameter="method" name="thesesForm" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.ListConfirmedThesesDA">
    		<forward name="list" path="theses-list-confirmed"/>
    		<forward name="export" path="/theses/exportTheses.do?method=prepare" redirect="true"/>
    	</action>

    	<action path="/theses/listExported" parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.ListExportedThesesDA">
    		<forward name="list" path="theses-list-exported"/>
    	</action>

    	<action path="/theses/checkThesis" parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.CheckThesisDA">
    		<forward name="view" path="thesis-verify"/>
    		<forward name="listPending" path="/theses/list.do?method=prepare" redirect="true"/>
    		<forward name="listConfirmed" path="/theses/listConfirmed.do?method=prepare" redirect="true"/>
    	</action>
    	
    	<action path="/theses/exportTheses" parameter="method" type="net.sourceforge.fenixedu.presentationTier.Action.library.theses.ExportThesesDA">
    		<forward name="confirmation" path="theses-export-confirm"/>
    	</action>
    	
    	<action path="/cardManagement" 
    			parameter="method"
    			type="net.sourceforge.fenixedu.presentationTier.Action.library.LibraryCardManagementDispatchAction">
    		<forward name="show-users" path="show-users"/>
    		<forward name="create-card" path="create-card"/>
    		<forward name="edit-card" path="edit-card"/>    		
    		<forward name="show-details" path="show-details"/>
    		<forward name="generate-missing-cards" path="generate-missing-cards"/> 
    		<forward name="generate-missing-letters" path="generate-missing-letters"/>
			<forward name="generate-missing-letters-for-students" path="generate-missing-letters-for-students"/> 		
			<forward name="create-person" path="create-person"/>
			<forward name="create-unit-person" path="create-unit-person"/>			
    	</action>
    </action-mappings>

    <!-- ========== Controller Configuration ================================ -->
	<controller processorClass="net.sourceforge.fenixedu.presentationTier.processor.FenixRequestProcessorWithTiles"/>

    <!-- ========== Message Resources Definitions ============================ -->
    <message-resources parameter="resources.LibraryResources" null="false"/> 
    <message-resources parameter="resources.LibraryResources" key="LIBRARY_RESOURCES" null="false"/> 
    <message-resources parameter="resources.ApplicationResources" key="APPLICATION_RESOURCES" null="false"/>
    <message-resources parameter="resources.ManagerResources" key="MANAGER_RESOURCES" null="false"/>
	<message-resources parameter="resources.GlobalResources" key="GLOBAL_RESOURCES" null="false"/>
	<message-resources parameter="resources.ImageResources" key="IMAGE_RESOURCES" null="false"/>
	<message-resources parameter="resources.HtmlAltResources" key="HTMLALT_RESOURCES" null="false"/>
    <message-resources parameter="resources.PortalResources" key="PORTAL_RESOURCES" null="false"/>
    <message-resources parameter="resources.EnumerationResources" key="ENUMERATION_RESOURCES" null="false"/>
   	<message-resources parameter="resources.DomainExceptionResources" key="DOMAIN_EXCEPTION_RESOURCES" null="false"/> 
    <message-resources parameter="resources.RendererResources" key="RENDERER_RESOURCES" null="false"/> 

    <!-- ========== Plug Ins Configuration ================================= -->
    <plug-in className="org.apache.struts.validator.ValidatorPlugIn">
        <set-property property="pathnames" value="/WEB-INF/validator-rules.xml,/WEB-INF/fenix-validator-rules.xml,/WEB-INF/conf/validation-default.xml"/>
    </plug-in>
        <plug-in className="org.apache.struts.tiles.TilesPlugin" >
        <set-property property="definitions-config" value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/library/tiles-library-definitions.xml,/WEB-INF/tiles/library/tiles-library-pages-definitions.xml" />
        <set-property property="moduleAware" value="true" />
        <set-property property="definitions-parser-validate" value="true" />
    </plug-in>
    <!-- 
    <plug-in className="pt.ist.fenixWebFramework.struts.tiles.FenixTilesPlugin" >
        <set-property property="definitions-config" value="/WEB-INF/tiles/layouts/tiles-layout-definitions.xml,/WEB-INF/tiles/library/tiles-library-definitions.xml,/WEB-INF/tiles/library/tiles-library-pages-definitions.xml" />
        <set-property property="moduleAware" value="true" />
        <set-property property="definitions-parser-validate" value="true" />
        <set-property property="factoryClassname" value="pt.ist.fenixWebFramework.struts.tiles.FenixDefinitionsFactory" />
        <set-property property="defaultTileDefinition" value="definition.library.master" />
    </plug-in>
    <plug-in className="pt.ist.fenixWebFramework.struts.plugin.StrutsAnnotationsPlugIn" />
     -->
</struts-config>