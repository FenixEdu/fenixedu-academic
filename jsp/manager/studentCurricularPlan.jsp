<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html" %><html:xhtml/><%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean" %><%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic" %><%@ taglib uri="/WEB-INF/taglibs-datetime.tld" prefix="dt" %><%@ taglib uri="/WEB-INF/fenix-renderers.tld" prefix="fr"%><%@ taglib uri="/WEB-INF/enum.tld" prefix="e" %><h2><bean:message bundle="MANAGER_RESOURCES" key="link.manager.studentsManagement"/></h2><br /><p><span class="error"><html:errors/></span></p><jsp:include page="studentCurricularPlanHeader.jsp"/>	<bean:define id="studentNumber" name="studentCurricularPlanForm" property="number"/>	<bean:define id="degreeType" name="studentCurricularPlanForm" property="degreeType"/>	<html:link module="/manager" page="<%= "/studentsManagement.do?method=prepareCreateStudentCurricularPlan&amp;page=0&amp;number="				+ pageContext.findAttribute("studentNumber").toString()				+ "&amp;degreeType="				+ pageContext.findAttribute("degreeType").toString()			%>">		<bean:message bundle="MANAGER_RESOURCES" key="link.create.student.curricular.plan"/>	</html:link>
	
	<br/><br/>
	<html:link page="/createClassificationsForStudents.do?method=prepare"><bean:message key="button.createClassifications" bundle="MANAGER_RESOURCES" /></html:link>
	<br/>	<logic:present name="infoStudentCurricularPlans">		<br/>		<bean:define id="deleteConfirmStudentCurricularPlan">			return confirm('<bean:message bundle="MANAGER_RESOURCES" key="message.confirm.delete.studentCurricularPlan"/>')		</bean:define>		<bean:define id="deleteConfirmEnrollment">			return confirm('<bean:message bundle="MANAGER_RESOURCES" key="message.confirm.delete.enrollment"/>')		</bean:define>				<logic:iterate id="infoStudentCurricularPlan" name="infoStudentCurricularPlans">			<bean:define id="studentCurricularPlanId" name="infoStudentCurricularPlan" property="idInternal"/>			<bean:define id="studentNumber" name="infoStudentCurricularPlan" property="infoStudent.number"/>			<bean:define id="degreeType" name="infoStudentCurricularPlan" property="infoStudent.degreeType"/>			<table>				<tr>					<th colspan="3" rowspan="3" class="listClasses-header">						<bean:message bundle="MANAGER_RESOURCES" key="label.studentCurricularPlan"/>					</th>					<td colspan="4" class="listClasses">						<bean:define id="studentCurricularPlanStateString" type="java.lang.String" name="infoStudentCurricularPlan" property="currentState.name"/>						<bean:define id="onChangeString" type="java.lang.String">this.form.method.value='changeStudentCurricularPlanState';this.form.selectedStudentCurricularPlanId.value=<%= studentCurricularPlanId.toString() %>;this.form.submit();</bean:define><html:form action="/studentsManagement" focus="number">	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.method" property="method" value="show"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.page" property="page" value="1"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.selectedStudentCurricularPlanId" property="selectedStudentCurricularPlanId" value="0"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.number" property="number"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.degreeType" property="degreeType"/>						<e:labelValues id="values" enumeration="net.sourceforge.fenixedu.domain.studentCurricularPlan.StudentCurricularPlanState" bundle="ENUMERATION_RESOURCES"/>						<html:select bundle="HTMLALT_RESOURCES" altKey="select.studentCurricularPlanState" property="studentCurricularPlanState" size="1"								onchange="<%= onChangeString %>" value="<%= studentCurricularPlanStateString %>">							<html:options collection="values" property="value" labelProperty="label"/>						</html:select>
					<html:submit styleId="javascriptButtonID" styleClass="altJavaScriptSubmitButton" bundle="HTMLALT_RESOURCES" altKey="submit.submit">
						<bean:message key="button.submit"/>
					</html:submit></html:form>						<bean:message bundle="MANAGER_RESOURCES" name="infoStudentCurricularPlan" property="currentState.name" bundle="ENUMERATION_RESOURCES"/>						<logic:present name="infoStudentCurricularPlan" property="startDate">							:							<dt:format pattern="yyyy-MM-dd">								<bean:write name="infoStudentCurricularPlan" property="startDate.time"/>							</dt:format>						<bean:define id="studentCurricularPlanID" type="java.lang.Integer" name="infoStudentCurricularPlan" property="idInternal"/>						<% net.sourceforge.fenixedu.domain.StudentCurricularPlan studentCurricularPlan = net.sourceforge.fenixedu.domain.RootDomainObject.getInstance().readStudentCurricularPlanByOID(studentCurricularPlanID);						   request.setAttribute("studentCurricularPlan", studentCurricularPlan);						%>						<bean:define id="urlR" type="java.lang.String">/studentsManagement.do?method=show&page=0&number=<bean:write name="studentCurricularPlan" property="student.number"/>&degreeType=<bean:write name="studentCurricularPlan" property="degreeCurricularPlan.degree.tipoCurso"/></bean:define>						<fr:edit name="studentCurricularPlan"								type="net.sourceforge.fenixedu.domain.StudentCurricularPlan"								schema="student.curricular.plan.start.date"								action="<%= urlR %>"								>							<fr:layout name="tabular">								<fr:property name="classes" value="style1" />								<fr:property name="columnClasses" value="listClasses" />							</fr:layout>						</fr:edit>						</logic:present>											</td>					<td colspan="1" rowspan="3" class="listClasses">						<html:link module="/manager" page="<%= "/studentsManagement.do?method=deleteStudentCurricularPlan&amp;page=0&amp;number="									+ pageContext.findAttribute("studentNumber").toString()									+ "&amp;degreeType="									+ pageContext.findAttribute("degreeType").toString()									+ "&amp;studentCurricularPlanId="									+ pageContext.findAttribute("studentCurricularPlanId").toString()								%>"								onclick='<%= pageContext.findAttribute("deleteConfirmStudentCurricularPlan").toString() %>'>							<bean:message bundle="MANAGER_RESOURCES" key="link.delete"/>						</html:link>					</td>				</tr>				<tr>					<td  colspan="4" class="listClasses">						<bean:write name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.infoDegree.nome"/>					</td>				</tr>				<tr>					<td colspan="4" class="listClasses">						<bean:write name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.name"/>						:						<logic:present name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.initialDate">							<dt:format pattern="yyyy-MM-dd">								<bean:write name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.initialDate.time"/>							</dt:format>						</logic:present>						<logic:notPresent name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.initialDate">							...						</logic:notPresent>						-						<logic:present name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.endDate">							<dt:format pattern="yyyy-MM-dd">								<bean:write name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.endDate.time"/>							</dt:format>						</logic:present>						<logic:notPresent name="infoStudentCurricularPlan" property="infoDegreeCurricularPlan.endDate">							...						</logic:notPresent>					</td>				</tr>					<tr>						<th class="listClasses-header">						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.executionYear"/>						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.manager.semester"/>						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.manager.degree"/>						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.course.code"/>						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.course.name"/>						</th>						<th class="listClasses-header">							<bean:message bundle="MANAGER_RESOURCES" key="label.grade"/>						</th>						<th class="listClasses-header">						</th>					</tr><html:form action="/studentsManagement" focus="number">	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.method" property="method" value="prepareTransferEnrollments"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.page" property="page" value="1"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.number" property="number"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.degreeType" property="degreeType"/>	<html:hidden bundle="HTMLALT_RESOURCES" altKey="hidden.selectedStudentCurricularPlanId" property="selectedStudentCurricularPlanId" value="<%= pageContext.findAttribute("studentCurricularPlanId").toString() %>"/>				<logic:iterate id="infoEnrollmentGrade" name="infoStudentCurricularPlan" property="infoEnrolments">					<bean:define id="enrollmentId" name="infoEnrollmentGrade" property="infoEnrollment.idInternal"/>					<bean:define id="enrollmentIdString" type="java.lang.String"><bean:write name="enrollmentId"/></bean:define>					<tr>						<td class="listClasses">							<html:multibox bundle="HTMLALT_RESOURCES" altKey="multibox.enrollmentIDsToTransfer" property="enrollmentIDsToTransfer" value="<%= enrollmentIdString %>"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="infoEnrollment.infoExecutionPeriod.infoExecutionYear.year"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="infoEnrollment.infoExecutionPeriod.semester"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="infoEnrollment.infoCurricularCourse.infoDegreeCurricularPlan.infoDegree.sigla"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="infoEnrollment.infoCurricularCourse.code"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="infoEnrollment.infoCurricularCourse.name"/>						</td>						<td class="listClasses">							<bean:write name="infoEnrollmentGrade" property="grade"/>						</td>						<td class="listClasses">							<html:link module="/manager" page="<%= "/studentsManagement.do?method=deleteEnrollment&amp;page=0&amp;studentNumber="										+ pageContext.findAttribute("studentNumber").toString()										+ "&amp;number="										+ pageContext.findAttribute("studentNumber").toString()										+ "&amp;degreeType="										+ pageContext.findAttribute("degreeType").toString()										+ "&amp;enrollmentId="										+ pageContext.findAttribute("enrollmentId").toString()									%>"									onclick='<%= pageContext.findAttribute("deleteConfirmEnrollment").toString() %>'>								<bean:message bundle="MANAGER_RESOURCES" key="link.delete"/>							</html:link>						</td>					</tr>				</logic:iterate>				<tr>					<th colspan="8" class="listClasses-header">						<html:submit bundle="HTMLALT_RESOURCES" altKey="submit.submit" property="submit" styleClass="inputbutton"/>					</th>				</tr></html:form>			</table>			<br />		</logic:iterate>	</logic:present>